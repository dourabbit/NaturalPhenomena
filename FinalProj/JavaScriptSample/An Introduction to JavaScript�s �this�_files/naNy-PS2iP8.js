/*1322085919,169775813*/

if (window.CavalryLogger) { CavalryLogger.start_js(["fbhRl"]); }

window.__DEV__=window.__DEV__||0;if(!window.skipDomainLower&&document.domain.toLowerCase().match(/(^|\.)facebook\..*/))document.domain=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1');function bagofholding(){}function bagof(a){return function(){return a;};}function env_get(a){return window.Env&&Env[a];}if(!Date.now)Date.now=function now(){return new Date().getTime();};Env=window.Env||{};Env.start=Env.start||Date.now();document.documentElement.className=document.documentElement.className.replace('no_js','');
window.require||(function(){var z={},w={},n=0,y=this,i=1,l=2,j='special',d='exports',c='dependencies',g='module',m='waiting',e='factory',k=undefined,b='define',f='global',h='require',a='context';function za(zi){var zk=z[zi],zd,zh;if(zk[m]&&zk[j]&l)q();if(!zk[d]){var zf=zk[d]={},zg=zk[e];if(Object.prototype.toString.call(zg)==='[object Function]'){var zc=[],ze=zk[c],zj=ze.length;if(zk[j]&l)zj=Math.min(zj,zg.length);for(zh=0;zh<zj;zh++){zd=ze[zh];zc.push(zd===g?zk:(zd===d?zf:za(zd)));}var zl=zg.apply(zk[a]||y,zc);if(zl)zk[d]=zl;}else zk[d]=zg;}return zk[d];}function u(zg,ze,zf,zd,zc){if(ze===k){ze=[];zf=zg;zg=s();}else if(zf===k){zf=ze;ze=zg;zg=s();}if(z[zg])return;var zh={id:zg};zh[e]=zf;zh[c]=ze;zh[a]=zc;zh[j]=zd;z[zg]=zh;o(zg);}function x(zd,ze,zc){u(zd,ze,k,i,zc);}function q(){var zd={},zc;for(zc in w)if(z[zc]&&!zd[zc]&&z[zc][j]&l)r({},zc,zd);}function r(zf,zc,zg){zg[zc]=1;var ze=w[zc],zd;if(!ze)return;zf[zc]=1;for(zd in ze){if(!z[zd][j]&l)continue;if(zf[zd]){delete ze[zd];z[zd][m]--;if(!z[zd][m])t(zd);}else r(zf,zd,zg);}zf[zc]=0;}function s(){return '__mod__'+n++;}function o(ze){var zf=z[ze];var zg=0;for(var zd=0;zd<zf[c].length;zd++){var zc=zf[c][zd];if(!z[zc]||z[zc][m]){w[zc]||(w[zc]={});w[zc][ze]=1;zg++;}}zf[m]=zg;if(!zg)t(ze);}function t(zd){var ze=z[zd];if(ze[j]&i)za(zd);var zf=w[zd];if(zf){delete w[zd];for(var zc in zf)if(!--z[zc][m])t(zc);}}function p(zd,zc){z[zd]={id:zd};z[zd][d]=zc;}p(g,0);p(d,0);p(b,u);p(f,y);p(h,za);u.amd={};y[b]=u;y[h]=za;za.ensure=x;var zb=false;var v=function(zf,zd,ze,zc){u(zf,zd,ze,zc||l);if(z[zf][m]&&!zb)zb=setTimeout(function(){q();zb=false;},9);};y.__d=function(zf,zd,ze,zc){zd=[f,g,h,d].concat(zd);v(zf,zd,ze,zc);};y.__e=function(zf,zd,ze,zc){zd=[f,h,g,d].concat(zd);v(zf,zd,ze,zc);};})();
__e("hasArrayNature",[],function(b,e,d,a){function c(f){return (!!f&&(typeof f=='object'||typeof f=='function')&&('length' in f)&&!('setInterval' in f)&&(Object.prototype.toString.call(f)==="[object Array]"||('callee' in f)||('item' in f)));}d.exports=c;});
__e("ArrayUtils",["hasArrayNature","ArrayUtils"],function(c,f,e,b){var d=f("hasArrayNature");var a={createFrom:function(h){if(!d(h))return [h];if(h.item){var g=h.length,i=new Array(g);while(g--)i[g]=h[g];return i;}return Array.prototype.slice.call(h);}};e.exports=a;});
__e("copyProperties",[],function(c,e,d,b){function a(g,h){g=g||{};h=h||{};for(var f in h)g[f]=h[f];if(h.hasOwnProperty&&h.hasOwnProperty('toString')&&(typeof h.toString!='undefined')&&(g.toString!==h.toString))g.toString=h.toString;return g;}d.exports=a;});
__e("arbiter",["ArrayUtils","copyProperties","hasArrayNature"],function(e,h,g,d){var b=h('ArrayUtils');var c=h('copyProperties');var f=h('hasArrayNature');if(!window.async_callback)window.async_callback=function(i,j){return i;};function a(){c(this,{_listeners:[],_events:{},_callbacks:{},_last_id:1,_listen:{},_index:{}});c(this,a);}c(a,{SUBSCRIBE_NEW:'new',SUBSCRIBE_ALL:'all',BEHAVIOR_EVENT:'event',BEHAVIOR_PERSISTENT:'persistent',BEHAVIOR_STATE:'state',LIVEMESSAGE:'livemessage',BOOTLOAD:'bootload',FUNCTION_EXTENSION:'function_ext',subscribe:function(s,j,q){if(!s||s.length==0)return null;s=b.createFrom(s);var i=a._getInstance(this);i._listeners.push({callback:j,types:s});var p=i._listeners.length-1;for(var l=0;l<s.length;l++)if(i._index[s[l]]){i._index[s[l]].push(p);}else i._index[s[l]]=[p];q=q||a.SUBSCRIBE_ALL;if(q==a.SUBSCRIBE_ALL){var k,r,o;for(var m=0;m<s.length;m++){r=s[m];if(r in i._events)for(var n=0;n<i._events[r].length;n++){k=i._events[r][n];o=j.apply(null,[r,k]);if(o===false){i._events[r].splice(n,1);n--;}}}}return {subscriberID:p};},unsubscribe:function(m){var i=a._getInstance(this);var k=i._listeners[m.subscriberID];if(!k)return;for(var l=0;l<k.types.length;l++){var n=k.types[l];if(i._index[n])for(var j=0;j<i._index[n].length;j++)if(i._index[n][j]==m.subscriberID){i._index[n].splice(j,1);if(i._index[n].length==0)delete i._index[n];break;}}delete i._listeners[m.subscriberID];},inform:function(r,k,j){var u=f(r);var t=b.createFrom(r);var i=a._getInstance(this);var q={};j=j||a.BEHAVIOR_EVENT;for(var m=0;m<t.length;m++){var r=t[m],l=null;if(j==a.BEHAVIOR_PERSISTENT){l=i._events.length;if(!(r in i._events))i._events[r]=[];i._events[r].push(k);i._events[r]._stateful=false;}else if(j==a.BEHAVIOR_STATE){l=0;i._events[r]=[k];i._events[r]._stateful=true;}else if(r in i._events)i._events[r]._stateful=false;window.ArbiterMonitor&&ArbiterMonitor.record('event',r,k,i);var p;if(i._index[r]){var s=b.createFrom(i._index[r]);for(var n=0;n<s.length;n++){var o=i._listeners[s[n]];if(o){p=o.callback.apply(null,[r,k]);if(p===false){if(l!==null)i._events[r].splice(l,1);break;}}}}i._updateCallbacks(r,k);window.ArbiterMonitor&&ArbiterMonitor.record('done',r,k,i);q[r]=p;}return u?q:q[t[0]];},query:function(j){var i=a._getInstance(this);if(!(j in i._events))return null;if(i._events[j].length)return i._events[j][0];return null;},_instance:null,_getInstance:function(i){if(i instanceof a)return i;if(!a._instance)a._instance=new a();return a._instance;},registerCallback:function(j,l){var p,k=0,i=a._getInstance(this),o=false;if(typeof j=='function'){p=i._last_id;i._last_id++;o=true;}else{if(!i._callbacks[j])return null;p=j;}if(f(l)){var q={};for(var n=0;n<l.length;n++)q[l[n]]=1;l=q;}for(var r in l){try{if(i.query(r))continue;}catch(m){}k+=l[r];if(i._listen[r]===undefined)i._listen[r]={};i._listen[r][p]=(i._listen[r][p]||0)+l[r];}if(k==0&&o){j();return null;}if(!o){i._callbacks[p].depnum+=k;}else i._callbacks[p]={callback:async_callback(j,'arbiter'),depnum:k};return p;},_updateCallbacks:function(l,k){if(k===null||!this._listen[l])return;for(var j in this._listen[l]){this._listen[l][j]--;if(this._listen[l][j]<=0)delete this._listen[l][j];this._callbacks[j].depnum--;if(this._callbacks[j].depnum<=0){var i=this._callbacks[j].callback;delete this._callbacks[j];i();}}}});e.Arbiter=g.exports=a;},3);
__e("mixins",["arbiter"],function(d,f,e,c){var a=f('arbiter');var b={Arbiter:{_getArbiterInstance:function(){return this._arbiter||(this._arbiter=new a());},inform:function(i,h,g){return this._getArbiterInstance().inform(i,h,g);},subscribe:function(i,g,h){return this._getArbiterInstance().subscribe(i,g,h);},unsubscribe:function(g){this._getArbiterInstance().unsubscribe(g);}}};d.Mixins=e.exports=b;},3);
__e("bind",[],function(c,e,d,b){function a(i,h){var f=Array.prototype.slice.call(arguments,2);function g(){var k=i||(this==window?false:this),j=f.concat(Array.prototype.slice.call(arguments));if(typeof(h)=="string"){if(k[h])return k[h].apply(k,j);}else return h.apply(k,j);}g.toString=function(){if(typeof(h)=="string")return "bound lazily: "+i[h];return "bound: "+h;};return g;}d.exports=a;c.bind=a;},3);
__e("function-extensions",["ArrayUtils","mixins","bind","copyProperties"],function(f,h,g,e){var a=h('ArrayUtils');var b=h('mixins');var c=h('bind');var d=h('copyProperties');Function.mixin=function(){for(var j=1,i=arguments.length;j<i;++j)d(arguments[0],b[arguments[j]]||arguments[j]);};Function.prototype.bind=function(j){var i=[j,this].concat(Array.prototype.slice.call(arguments,1));return c.apply(null,i);};Function.prototype.curry=Function.prototype.bind.bind(null,null);Function.prototype.shield=function(j){if(typeof this!='function')throw new TypeException();var i=this.bind.apply(this,a.createFrom(arguments));return function(){return i();};};Function.prototype.defer=function(j,i){if(typeof this!='function')throw new TypeError();j=j||0;return setTimeout(this,j,i);};},3);
__e("Class",["function-extensions","arbiter","bind"],function(n,p,o,m){p('function-extensions');var a=p('arbiter');var l=p('bind');var h={};var d=null;var b={extend:function(q,r){if(!d)d=a.subscribe(a.BOOTLOAD,j);i(q,r);},mixin:function(s,r){var q=Array.prototype.slice.call(arguments);q[0]=q[0].prototype;Function.mixin.apply(Function,q);}};function i(r,s){r.__class_extending=true;var q=a.registerCallback(l(null,c,r,s),[a.FUNCTION_EXTENSION+'/'+s,a.BOOTLOAD]);if(q!==null)h[s]=true;}function j(){for(var q in h)if(!!n[q]){delete h[q];if(!n[q].__class_extending){a.inform(a.FUNCTION_EXTENSION+'/'+q,true,a.BEHAVIOR_STATE);}else n[q].__class_name=q;}}function c(q,s){delete q.__class_extending;var t=g(n[s],0);var r=g(q,t.prototype.__level+1);r.parent=t;if(!!q.__class_name)a.inform(a.FUNCTION_EXTENSION+'/'+q.__class_name,true,a.BEHAVIOR_STATE);}function g(s,q){if(s._metaprototype)return s._metaprototype;var r=new Function();r.construct=e;r.prototype.construct=k(s,q,true);r.prototype.__level=q;r.base=s;s.prototype.parent=r;s._metaprototype=r;return r;}function e(q){f(q.parent);var t=[];var s=q;while(s.parent){var r=new s.parent();t.push(r);r.__instance=q;s=s.parent;}q.parent=t[1];t.reverse();t.pop();q.__parents=t;q.__instance=q;return q.parent.construct.apply(q.parent,arguments);}function f(t){if(t.initialized)return;var q=t.base.prototype;if(t.parent){f(t.parent);var u=t.parent.prototype;for(var r in u)if(r!='__level'&&r!='construct'&&q[r]===undefined)q[r]=t.prototype[r]=u[r];}t.initialized=true;var s=t.prototype.__level;for(var r in q)if(r!='parent')q[r]=t.prototype[r]=k(q[r],s);}function k(s,r,t){if(typeof s!='function'||s.__prototyped)return s;var q=function(){var w=this.__instance;if(w){var x=w.parent;w.parent=r?w.__parents[r-1]:null;var u=arguments;if(t){u=[];for(var v=1;v<arguments.length;v++)u.push(arguments[v]);}var y=s.apply(w,u);w.parent=x;return y;}else return s.apply(this,arguments);};q.__prototyped=true;return q;}n.Class=o.exports=b;},3);
__e("util",[],function(b,d,c,a){if(typeof console=='undefined')b.console={log:bagofholding,info:bagofholding,warn:bagofholding,debug:bagofholding,dir:bagofholding,error:bagofholding};b.Util=c.exports=b.console;},3);
__e("isEmpty",[],function(b,e,d,a){function c(g){if(g instanceof Array){return g.length===0;}else if(g instanceof Object){for(var f in g)return false;return true;}else return !g;}d.exports=c;});
__e("bootloader",["ArrayUtils","arbiter","util","isEmpty"],function(w,z,y,v){var b=z('ArrayUtils');var a=z('arbiter');var d=z('util');var x=z('isEmpty');var f={};var k=null;var o={};var m={};var h={};var i={};var s=[];var l=null;var p={};var j={};var g=false;var u=[];var e=5000;function n(zj,zg,ze,zb){if(zj=='js'){var zf=document.createElement('script');zf.src=zg;zf.type='text/javascript';zf.async=true;var za=function(){c.done([ze]);};zf.onload=zf.onerror=za;zf.onreadystatechange=function(){if(this.readyState in {loaded:1,complete:1})za();};zb.appendChild(zf);}else if(zj=='css'){if(document.createStyleSheet){var zh=s,zi=-1;for(var zc=0;zc<zh.length;zc++)if(zh[zc].imports.length<25){zi=zc;break;}if(zi==-1){zh.push(document.createStyleSheet());zi=zh.length-1;}zh[zi].addImport(zg);i[ze]={tagIdx:zi,href:zg};}else{var zd=document.createElement('link');zd.rel="stylesheet";zd.type="text/css";zd.media="all";zd.href=zg;i[ze]={link:zd};zb.appendChild(zd);}r(ze);}}function q(){var zd;var za=[];var ze=Date.now();if(ze>=k){for(zd in f)za.push(zd);if(window.logJSError)if(Math.random()<.01)logJSError('bootloader',{error:'CSS timeout',extra:{name:za.join(',')}});}else for(zd in f){var zf=f[zd];var zg=window.getComputedStyle?window.getComputedStyle(zf,null):zf.currentStyle;if(zg&&parseInt(zg.height,10)>1)za.push(zd);}if(!x(za)){for(var zc=0;zc<za.length;zc++){var zb=f[za[zc]];zb.parentNode.removeChild(zb);delete f[za[zc]];}k=ze+e;c.done(za,true);}return x(f);}function r(zc){var za='bootloader_'+zc.replace(/[^a-z0-9]/ig,'_');var zd=document.createElement('meta');zd.id=za;c.getHardpoint().appendChild(zd);k=Date.now()+e;var ze=x(f);f[zc]=zd;if(ze)var zb=setInterval(function _poll(){if(q())zb&&clearInterval(zb);},20,false);}function t(zd){if(zd in i){var zb=i[zd],zc=zb.link;if(zc){zc.parentNode.removeChild(zc);}else{var ze=s[zb.tagIdx];for(var za=0;za<ze.imports.length;za++)if(ze.imports[za].href==zb.href){ze.removeImport(za);break;}}delete i[zd];delete o[zd];a.inform(a.BOOTLOAD+'/'+zd,null,a.BEHAVIOR_STATE);}}var c={configurePage:function(za){var zg={};var zf=c.resolveResources(za);var zb;for(zb=0;zb<zf.length;zb++){zg[zf[zb].src]=zf[zb];c.requested(zf[zb].name);r(zf[zb].name);}var zd=document.getElementsByTagName('link');for(zb=0;zb<zd.length;++zb){if(zd[zb].rel!='stylesheet')continue;for(var zc in zg)if(zd[zb].href.indexOf(zc)!==-1){var ze=zg[zc].name;i[ze]={link:zd[zb]};if(zg[zc].permanent)m[ze]=true;delete zg[zc];break;}}},loadModules:function(zb,za){zb=b.createFrom(zb);c.loadComponents(zb,function inject_module_callback(){var zd=[];for(var zc=0;zc<zb.length;zc++)zd.push(z(zb[zc]));za.apply(this,zd);});},loadComponents:function(zc,za){if(!g){u.push([zc,za]);return;}zc=b.createFrom(zc);var zf=[];for(var zd=0;zd<zc.length;++zd){if(!zc[zd])continue;var zb=h[zc[zd]];if(!!zb)for(var ze=0;ze<zb.length;++ze)zf.push(zb[ze]);}c.loadResources(zf,za);},loadResources:function(zj,zb,zi,zm){var ze;zj=c.resolveResources(b.createFrom(zj));if(zi){var zg={};for(ze=0;ze<zj.length;++ze)zg[zj[ze].name]=true;for(var zf in o)if(!(zf in m)&&!(zf in zg)&&!(zf in j))t(zf);j={};}var zn=[];var zh=[];for(ze=0;ze<zj.length;++ze){var zk=zj[ze];if(zk.permanent)m[zk.name]=true;var zl=a.BOOTLOAD+'/'+zk.name;if(a.query(zl)!==null)continue;if(!zk.nonblocking)zh.push(zl);if(!o[zk.name]){c.requested(zk.name);zn.push(zk);window.CavalryLogger&&CavalryLogger.getInstance().measureResources(zk,zm);}}if(zb)zb=a.registerCallback(zb,zh);var zd=document.documentMode||+(/MSIE.(\d+)/.exec(navigator.userAgent)||[])[1];var zc=c.getHardpoint();var za=zd?zc:document.createDocumentFragment();for(ze=0;ze<zn.length;++ze)n(zn[ze].type,zn[ze].src,zn[ze].name,za);if(zc!==za)zc.appendChild(za);return zb;},requestResource:function(zd,zc,zb){var za=c.getHardpoint();n(zd,zc,zb,za);},done:function(ze,zb){c.requested(ze);if(!zb){var zd={sender:this};a.inform(a.BOOTLOAD,zd,a.BEHAVIOR_EVENT);}for(var za=0;za<ze.length;++za){var zc=ze[za];a.inform(a.BOOTLOAD+'/'+zc,true,a.BEHAVIOR_STATE);}},requested:function(zb){zb=b.createFrom(zb);for(var za=0;za<zb.length;++za)o[zb[za]]=true;},enableBootload:function(zb){for(var zc in zb)if(!h[zc])h[zc]=zb[zc];if(!g){g=true;for(var za=0;za<u.length;za++)c.loadComponents.apply(null,u[za]);u=[];}},getHardpoint:function(){if(!l){var za=document.getElementsByTagName('head');l=za.length&&za[0]||document.body;}return l;},setResourceMap:function(zb){if(!zb)return;for(var za in zb){if(!zb[za].name)zb[za].name=za;p[za]=zb[za];}},resolveResources:function(zc){if(!zc)return [];var zb=[];for(var za=0;za<zc.length;++za)if(typeof zc[za]=='string'){if(zc[za] in p)zb.push(p[zc[za]]);}else zb.push(zc[za]);return zb;},loadEarlyResources:function(zc){var za;c.setResourceMap(zc);var zb=[];for(za in zc)zb.push(p[za]);c.loadResources(zb);for(za in zc){var zd=p[za];if(!zd.permanent)j[zd.name]=zd;}},isDisplayJS:function(za){if(typeof za=='string')za=p[za];return za.displayjs;}};w.Bootloader=y.exports=c;},3);
__e("UserNoOp",[],function(d,f,e,c){var a=function(){};var b=function(){return this;};a.prototype={add_event:b,add_data:b,set_ua_id:b,set_namespace:b};e.exports=a;});
__e("onload",["arbiter","copyProperties"],function(l,u,m,k){var a=u('arbiter');var c=a.BEHAVIOR_STATE;var h=function(v){window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp(v);};var b={ONLOAD:'onload/onload',ONLOAD_CALLBACK:'onload/onload_callback',ONLOAD_DOMCONTENT:'onload/dom_content_ready',ONLOAD_DOMCONTENT_CALLBACK:'onload/domcontent_callback',ONBEFOREUNLOAD:'onload/beforeunload',ONUNLOAD:'onload/unload'};function g(){return !window.loading_page_chrome;}function q(v){if(window.loaded&&typeof _runHook!='undefined'){_runHook(v);}else d('onloadhooks',v);}function n(v){if(window.afterloaded&&typeof _runHook!='undefined'){setTimeout(function(){_runHook(v);},0);}else d('onafterloadhooks',v);}function o(v,w){if(w===undefined)w=g();w?d('onbeforeleavehooks',v):d('onbeforeunloadhooks',v);}function s(v){if(!window.onunload)window.onunload=function(){a.inform(b.ONUNLOAD,true,c);};d('onunloadhooks',v);}function p(v){d('onleavehooks',v);}function d(w,v){window[w]=(window[w]||[]).concat(v);}function t(v){window[v]=[];}function f(){a.inform(b.ONLOAD_DOMCONTENT,true,c);}function e(){var v=document,z=window;if(v.addEventListener){var za=/AppleWebKit.(\d+)/.exec(navigator.userAgent);if(za&&za[1]<525){var y=setInterval(function(){if(/loaded|complete/.test(v.readyState)){f();clearInterval(y);}},10);}else v.addEventListener("DOMContentLoaded",f,true);}else{var x='javascript:void(0)';if(z.location.protocol=='https:')x='//:';v.write('<script onreadystatechange="if (this.readyState==\'complete\') {'+'this.parentNode.removeChild(this);_domcontentready();}" '+'defer="defer" src="'+x+'"><\/script\>');}var w=z.onload;z.onload=function(){h('t_layout');w&&w();a.inform(b.ONLOAD,true,c);};z.onbeforeunload=function(){var zb={};a.inform(b.ONBEFOREUNLOAD,zb,c);if(!zb.warn)a.inform('onload/exit',true);return zb.warn;};}var r=a.registerCallback(function(){h('t_onload');a.inform(b.ONLOAD_CALLBACK,true,c);},[b.ONLOAD]);var j=a.registerCallback(function(){h('t_domcontent');a.inform(b.ONLOAD_DOMCONTENT_CALLBACK,true,c);},[b.ONLOAD_DOMCONTENT]);if(!window._eventHandlersBootstrapped){_eventHandlersBootstrapped=true;e();}m.exports={Event:b,runOnload:q,runAfterload:n};var i=u('copyProperties');i(l,{OnloadEvent:b,onloadRegister:q,onafterloadRegister:n,onleaveRegister:p,onbeforeunloadRegister:o,onunloadRegister:s,domcontent_callback:j,onload_callback:r,_domcontentready:f,removeHook:t,_addHook:d});},3);
__e("EagleEye",["arbiter","bootloader","onload","util"],function(n,u,r,m){var a=u('arbiter');var c=u('bootloader');var e=u('onload');var g=u('util');var x='_e_';var z=(window.name||'').toString();if(z.length==7&&z.substr(0,3)==x){z=z.substr(3);}else{z=window._EagleEyeSeed;if(window==window.top)window.name=x+window._EagleEyeSeed;}var v=(window.location.protocol=='https:'&&document.cookie.match(/\bcsm=1/))?'; secure':'';var s=x+z+'_';var l=new Date(Date.now()+604800000).toGMTString();var j=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1');var k='; expires='+l+';path=/; domain='+j+v;var i=0;var t;var y=window._EagleEyeSessionStorage&&window.sessionStorage;var p=document.cookie.length;var q=false;var w=Date.now();function o(zd){var za=2166136261;for(var zb=0,zc=zd.length;zb<zc;++zb)za=(za^zd.charCodeAt(zb))*16777619;za+=za<<13;za^=za>>7;za+=za<<3;za^=za>>17;za+=za<<5;return (za|0)+2147483648;}function h(za){return s+(i++)+'='+encodeURIComponent(za)+k;}function b(){var za=[];var zd=false;var zc=0;var zb=0;this.isEmpty=function(){return !za.length;};this.enqueue=function(zf,ze){if(ze){za.unshift(zf);}else za.push(zf);};this.dequeue=function(){za.shift();};this.peek=function(){return za[0];};this.clear=function(zg){p=Math.min(p,document.cookie.length);if(!q&&(new Date()-w>60000))q=true;var ze=!zg&&(document.cookie.search(x)>=0);var zq=!!(window.Env&&Env.cookie_header_limit);var zl=(window.Env&&Env.cookie_count_limit)||19;var zm=(window.Env&&Env.cookie_header_limit)||3950;var zj=zl-5;var zk=zm-1000;while(!this.isEmpty()){var zf=h(this.peek());if(zq&&(zf.length>zm||(q&&zf.length+p>zm))){this.dequeue();continue;}if((ze||zq)&&((document.cookie.length+zf.length>zm)||(document.cookie.split(';').length>zl)))break;document.cookie=zf;ze=true;this.dequeue();}var zn=Date.now();if(zg||!zd&&ze&&((zb>0)&&(Math.min(10*Math.pow(2,zb-1),60000)+zc<zn))&&a.query(e.Event.ONLOAD)&&(!this.isEmpty()||(document.cookie.length>zk)||(document.cookie.split(';').length>zj))){var zp=new Image();var zo=this;var zh=window._EagleEyeDomain||(window.Env&&Env.tracking_domain)||'';zd=true;zp.onload=function _EagleEye_logged(){zd=false;zb=0;zo.clear();};zp.onerror=zp.onabort=function _EagleEye_error(){zd=false;zc=Date.now();zb++;};var zi=(window.Env&&Env.fb_isb)?'&fb_isb='+Env.fb_isb:'';var zr=window.Env?'&__user='+Env.user:'';zp.src=zh+'/ajax/nectar.php?asyncSignal='+(Math.floor(Math.random()*10000)+1)+zi+zr+'&'+(!zg?'':'s=')+zn;}};}t=new b();if(y){var f=function(){var zc=0;var ze=zc;function zb(){var zg=sessionStorage.getItem('_e_ids');if(zg){var zf=(zg+'').split(';');if(zf.length==2){zc=parseInt(zf[0],10);ze=parseInt(zf[1],10);}}}function zd(){var zf=zc+';'+ze;sessionStorage.setItem('_e_ids',zf);}function za(zf){return '_e_'+((zf!==undefined)?zf:zc++);}this.isEmpty=function(){return ze===zc;};this.enqueue=function(zh,zf){var zg=zf?za(--ze):za();sessionStorage.setItem(zg,zh);zd();};this.dequeue=function(){this.isEmpty();sessionStorage.removeItem(za(ze));ze++;zd();};this.peek=function(){var zf=sessionStorage.getItem(za(ze));return zf?(zf+''):zf;};this.clear=t.clear;zb();};t=new f();}var d={log:function(zd,za,zb){if(window.Env&&Env.no_cookies)return;var ze=[z,Date.now(),zd].concat(za);ze.push(ze.length);function zc(){var zg=JSON.stringify(ze);try{t.enqueue(zg,!!zb);t.clear(!!zb);}catch(zf){if(y&&(zf.code===1000)){t=new b();y=false;zc();}}}if(window.JSON){zc();}else c.loadComponents('json',zc);},createLogger:function(zc,za){za=(za===undefined)?1:za;var zb=function(zd,ze){if(zb.enabled)d.log(zc,zd,ze);};zb.enabled=false;zb._key=((window.Env&&Env.user)||Math.random())+zc;zb.enabled=(o(zb._key)%65535/65535)<=za;return zb;},getSessionID:function(){return z;}};n.EagleEye=r.exports=d;},3);
__e("FunctionUtils",[],function(b,e,d,a){function c(i,k,g,f){var j;var h=function(){var l=arguments;var m=this;var n=function(){j=null;i.apply(m,l);};g&&h.reset();if(g||!j)j=setTimeout(n,k,f);};h.reset=function(){j&&clearTimeout(j);j=null;};return h;}d.exports={debounce:function(g,h,f){return c(g,h,true,f);},throttle:function(g,h,f){return c(g,h,false,f);}};});
__e("userAction",["function-extensions","arbiter","EagleEye","FunctionUtils","copyProperties"],function(h,m,i,g){m("function-extensions");var a=m("arbiter");var b=m("EagleEye");var c=m("FunctionUtils");var f=m("copyProperties");function d(s,r,p){var q=s+'/'+r;f(this,{ue:q,_ua_id:null,_ts:s,_ns:null,_start_ts:s,_prev_event:'s',_ue_ts:s,_ue_count:r,_context:p,_data_version:1,_event_version:2,_info_version:1});if(d.enable.report)b.log('uan',[s,r]);this._report=c.debounce(function report(){if(!d.enable.report)return;var t=[this._info_version,this.ue,this._ns,this._ua_id];b.log('uai',t);}.bind(this),100);}var e=[];d.enable=function(q){if(!q)return;if(!hasArrayNature(q))q=[q];for(var p=0;p<q.length;p++)d.enable[q[p]]=true;};f(d.prototype,{set_ua_id:function(p){this._ua_id=p;this._report();return this;},set_namespace:function(p){this._ns=p;this._report();return this;},add_event:function(r,s){if(!d.enable.events)return this;s=s||0;var u=(Date.now()-s);var p=u-this._ts;var t=u-this._ue_ts;var q=[this._event_version,this.ue,this._ns,this._ua_id,this._prev_event,r,p,t];window.EagleEye&&b.log('uae',q);this._ts=u;this._prev_event=r;return this;},add_data:function(p){if(!d.enable.data)return this;var q=[this._data_version,this.ue,p];b.log('uad',q);return this;}});var n=0;var l=0;var k=null;var j=null;function o(p,t,event,s,q){var w=Date.now();var v=w+'/'+n;q=q||{};if(!t&&event)t=event.getTarget();var r=50;if(t&&k)if(w-l<r&&t==k&&s!="FORCE")return e[e.length-1];k=t;j=event;var u=new d(w,n,p);e.push(u);while(e.length>10)e.shift();a.inform("UserAction/new",{ua:u,node:t,mode:s,event:event,extra_data:q});l=w;n++;return u;}a.subscribe("UserAction/enable",function(q,p){d.enable(p);});i.exports=o;});
__e("UserAction",["UserNoOp","userAction"],function(a,b){a.UserNoOp=b('UserNoOp');a.user_action=a.user_action||b('userAction');a.report_data=a.report_data||function(c,d){user_action(c,null,null,'FORCE',d);};},3);
function set_ue_cookie(b){if(!(window.Env&&Env.no_cookies)){var a=0;if(window.afterloaded){a=2;}else if(window.loaded)a=1;document.cookie="act="+encodeURIComponent(b+":"+a)+"; path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}}
(function(){ClickRef={};ClickRef.get_intern_ref=function(c){if(!!c){var b={profile_minifeed:1,info_tab:1,gb_content_and_toolbar:1,gb_muffin_area:1,ego:1,bookmarks_menu:1,jewelBoxNotif:1,jewelNotif:1,BeeperBox:1,navSearch:1};for(var a=c;a&&a!=document.body;a=a.parentNode){if(!a.id||typeof a.id!=='string')continue;if(a.id.substr(0,8)=='pagelet_')return a.id.substr(8);if(a.id.substr(0,8)=='box_app_')return a.id;if(b[a.id])return a.id;}}return '-';};ClickRef.get_href=function(b){var a=(b.getAttribute&&(b.getAttribute('ajaxify')||b.getAttribute('data-endpoint'))||b.action||b.href||b.name);return a;};ClickRef.mouse_click_info=function(b){if(!ge('content'))return [0,0,0,0];var a=$('content');var c=window.Vector2?Vector2.getEventPosition(b):{x:0,y:0};return [c.x,c.y,a.offsetLeft,a.clientWidth];};ClickRef.should_report=function(b,a){if(a=='FORCE')return true;if(a=='INDIRECT')return false;return (b&&ClickRef.get_href(b));};ClickRef.collect_data=function(l,h,event,d){var j=(!window.ArbiterMonitor)?'r':'a',g=[0,0,0,0],k,e,f;if(!!event){k=event.type;if(k=='click'&&ge('content'))g=ClickRef.mouse_click_info(event);var b=0;event.ctrlKey&&(b+=1);event.shiftKey&&(b+=2);event.altKey&&(b+=4);event.metaKey&&(b+=8);if(b)k+=b;}if(!!h)e=ClickRef.get_href(h);var a=[];if(window.ArbiterMonitor){f=ArbiterMonitor.getInternRef(h);a=ArbiterMonitor.getActFields();}var c={};if(window.collect_data_attribs){c=collect_data_attribs(h,['ft','gt']);copy_properties(c.ft,d.ft||{});copy_properties(c.gt,d.gt||{});if(c.gt.ua_id)l.set_ua_id(c.gt.ua_id);if(typeof(c.ft.ei)==='string')delete c.ft.ei;}var i=[l._ue_ts,l._ue_count,e||'-',l._context,k||'-',f||ClickRef.get_intern_ref(h),j,window.URI?URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,c].concat(g).concat(a);return i;};ClickRef.onNewUserAction=function(b,a){Bootloader.loadComponents('dom-collect',function(){if(ClickRef.should_report(a.node,a.mode)){var c=ClickRef.collect_data(a.ua,a.node,a.event,a.extra_data);ClickRef.report(a.ua,c);}});};ClickRef.report=function(b,a){var c=b.ue;set_ue_cookie(c);window.EagleEye&&EagleEye.log('act',a);};window.Arbiter&&Arbiter.subscribe("UserAction/new",ClickRef.onNewUserAction);})();
__e("dom-core",[],function(d,f,e,b){var a=function(g){return typeof g=='string'?document.getElementById(g):g;};var c=a;d.ge=b.ge=c;d.$=b.$=a;},3);
__e("css-core",["dom-core"],function(d,f,e,c){var a=f('dom-core').$;var b={hasClass:function(h,g){h=a(h);return (' '+h.className+' ').indexOf(' '+g+' ')>-1;},addClass:function(h,g){h=a(h);if(g&&!b.hasClass(h,g))h.className=h.className+' '+g;return h;},removeClass:function(h,g){h=a(h);if(b.hasClass(h,g))h.className=h.className.replace(new RegExp('(^|\\s)'+g+'(?:\\s|$)','g'),'$1');return h;},toggleClass:function(h,g){return b.conditionClass(h,g,!b.hasClass(h,g));},conditionClass:function(i,h,g){return (g?b.addClass:b.removeClass)(i,h);},show:function(g){b.removeClass(g,'hidden_elem');},hide:function(g){b.addClass(g,'hidden_elem');},conditionShow:function(h,g){b.conditionClass(h,'hidden_elem',!g);}};d.CSS=e.exports=b;},3);
__e("parent",["css-core"],function(d,f,e,c){var a=f('css-core');var b={byTag:function(g,h){h=h.toUpperCase();while(g&&g.nodeName!=h)g=g.parentNode;return g;},byClass:function(h,g){while(h&&!a.hasClass(h,g))h=h.parentNode;return h;},byAttribute:function(h,g){while(h&&(!h.getAttribute||!h.getAttribute(g)))h=h.parentNode;return h;}};d.Parent=e.exports=b;},3);
__e("trackReferrer",["parent"],function(c,e,d,b){var a=e("parent");function f(g,k){g=a.byAttribute(g,'data-referrer');if(g){var j=/^(?:(?:[^:\/?#]+):)?(?:\/\/(?:[^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/.exec(k)[1]||'';if(!j)return;var i=j+'|'+g.getAttribute('data-referrer');var h=new Date();h.setTime(Date.now()+1000);document.cookie="x-src="+encodeURIComponent(i)+"; "+"expires="+h.toGMTString()+";path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}return g;}d.exports=f;});
__e("referrer-tracker",["trackReferrer"],function(a,b){a.trackReferrer=b('trackReferrer');},3);
!function(){if(window.__primer)return;window.__primer=true;var a=null;var b=/async(?:-post)?|dialog(?:-pipe|-post)?|theater|toggle/;document.documentElement.onclick=function(e){e=e||window.event;a=e.target||e.srcElement;var f=Parent.byTag(a,'A');if(!f)return;var c=f.getAttribute('ajaxify');var g=f.href;var l=c||g;if(l){var k=user_action('a',f,e).set_namespace('primer');if(window.ArbiterMonitor)ArbiterMonitor.initUA(k,[f]);}if(c&&g&&!(/#$/).test(g)){var h=e.which&&e.which!=1;var i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(h||i)return;}trackReferrer(f,l);var d=['dialog'];var j=f.rel&&f.rel.match(b);j=j&&j[0];switch(j){case 'dialog-pipe':d.push('ajaxpipe');case 'dialog':case 'dialog-post':Bootloader.loadComponents(d,function(){Dialog.bootstrap(l,null,j=='dialog',null,null,f);});break;case 'async':case 'async-post':Bootloader.loadComponents('async',function(){AsyncRequest.bootstrap(l,f);});break;case 'theater':Bootloader.loadComponents('PhotoSnowbox',function(){PhotoSnowbox.bootstrap(l,f);});break;case 'toggle':CSS.toggleClass(f.parentNode,'openToggler');Bootloader.loadComponents('Toggler',function(){Toggler.bootstrap(f);});break;default:return;}return false;};document.documentElement.onsubmit=function(c){c=c||window.event;var d=c.target||c.srcElement;if(d&&d.nodeName=='FORM'&&d.getAttribute('rel')=='async'){var f=user_action('f',d,c).set_namespace('primer');if(window.ArbiterMonitor)ArbiterMonitor.initUA(f,[d]);var e=a;Bootloader.loadComponents('dom-form',function(){Form.bootstrap(d,e);});return false;}};}();
__e("json",[],function(global,require,module,exports){if(!this.JSON)this.JSON={};(function(){function f(n){return n<10?'0'+n:n;}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function')value=value.toJSON(key);if(typeof rep==='function')value=rep.call(holder,key,value);switch(typeof value){case 'string':return quote(value);case 'number':return isFinite(value)?String(value):'null';case 'boolean':case 'null':return String(value);case 'object':if(!value)return 'null';gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1)partial[i]=str(i,value)||'null';v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==='string'){v=str(k,value);if(v)partial.push(quote(k)+(gap?': ':':')+v);}}}else for(k in value)if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v)partial.push(quote(k)+(gap?': ':':')+v);}v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}if(typeof JSON.stringify!=='function')JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1)indent+=' ';}else if(typeof space==='string')indent=space;rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number'))throw new Error('JSON.stringify');return str('',{'':value});};if(typeof JSON.parse!=='function')JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object')for(k in value)if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else delete value[k];}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return '\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}throw new SyntaxError('JSON.parse');};JSON.stringify=function(old){return function(){var s=old.apply(this,arguments);return s?s.replace(/[%\u2028\u2029]/g,function(m){var s=m.charCodeAt(0).toString(16);return '\\u0000'.substring(0,6-s.length)+s;}):s;};}(JSON.stringify);}());if(!global.JSON)global.JSON=JSON;},3);
__e("array-extensions",["arbiter","copyProperties"],function(d,g,e,c){var a=g('arbiter');var b=g('copyProperties');function f(h){return function(){if(this===d)throw new TypeError();return h.apply(this,arguments);};}b(Array.prototype,{map:function(i,h){if(this===d||typeof i!='function')throw new TypeError();var j;var k=this.length;var l=new Array(k);for(j=0;j<k;++j)if(j in this)l[j]=i.call(h,this[j],j,this);return l;},forEach:function(i,h){this.map(i,h);},filter:f(function(i,h){if(typeof i!='function')throw new TypeError();var j,m,k=this.length,l=[];for(j=0;j<k;++j)if(j in this){m=this[j];if(i.call(h,m,j,this))l.push(m);}return l;}),every:f(function(i,h){if(typeof i!=='function')throw new TypeError();var l=new Object(this);var k=l.length;for(var j=0;j<k;j++)if(j in l)if(!i.call(h,l[j],j,l))return false;return true;}),some:f(function(i,h){if(typeof i!=='function')throw new TypeError();var l=new Object(this);var k=l.length;for(var j=0;j<k;j++)if(j in l)if(i.call(h,l[j],j,l))return true;return false;}),reduce:null,reduceRight:null,sort:f(Array.prototype.sort),reverse:f(Array.prototype.reverse),concat:f(Array.prototype.concat),slice:f(Array.prototype.slice),indexOf:f(Array.prototype.indexOf||function(j,h){var i=this.length;h|=0;if(h<0)h+=i;for(;h<i;h++)if(h in this&&this[h]===j)return h;return -1;}),contains:function(h){return this.indexOf(h)!=-1;},remove:function(i){var h=this.indexOf(i);if(h!=-1)this.splice(h,1);}});Array.prototype.each=Array.prototype.forEach;a.inform('fbjs/prototypes');},3);
function tx(b,a){if(typeof _string_table=='undefined')return;b=_string_table[b];return _tx(b,a);}function intl_ends_in_punct(a){if(typeof a!='string')return false;return a.match(new RegExp(intl_ends_in_punct.punct_char_class+'['+')"'+"'"+'\u00BB'+'\u0F3B'+'\u0F3D'+'\u2019'+'\u201D'+'\u203A'+'\u3009'+'\u300B'+'\u300D'+'\u300F'+'\u3011'+'\u3015'+'\u3017'+'\u3019'+'\u301B'+'\u301E'+'\u301F'+'\uFD3F'+'\uFF07'+'\uFF09'+'\uFF3D'+'\s'+']*$'));}intl_ends_in_punct.punct_char_class='['+'.!?'+'\u3002'+'\uFF01'+'\uFF1F'+'\u0964'+'\u2026'+'\u0EAF'+'\u1801'+'\u0E2F'+'\uFF0E'+']';function intl_render_list_separator(){return _tx("{previous-items}, {next-items}",{'previous-items':'','next-items':''});}function intl_phonological_rules(g){var e,d=g,f=window.intl_locale_rewrites,b,c;try{if(f){var pats=[],reps=[];for(var p in f.patterns){var pat=p,rep=f.patterns[p];for(b in f.meta){e=new RegExp(b.slice(1,-1),'g');pat=pat.replace(e,f.meta[b]);rep=rep.replace(e,f.meta[b]);}pats[pats.length]=pat;reps[reps.length]=rep;}for(var ii=0;ii<pats.length;ii++){e=new RegExp(pats[ii].slice(1,-1),'g');if(reps[ii]=='javascript'){c=g.match(e);b=c&&c[0];if(b)g=g.replace(e,b.slice(1).toLowerCase());}else g=g.replace(e,reps[ii]);}}}catch(a){g=d;}e=new RegExp('\x01','g');g=g.replace(e,'');return g;}function _tx(e,a){if(!a)return e;var d;for(var c in a){if(intl_ends_in_punct(a[c])){d=new RegExp('\\{'+c+'\\}'+intl_ends_in_punct.punct_char_class+'*','g');}else d=new RegExp('\\{'+c+'\\}','g');var b='\x01';e=e.replace(d,b+a[c]+b);}e=intl_phonological_rules(e);return e;}
__e("AsyncResponse",["copyProperties"],function(d,f,e,c){var b=f("copyProperties");function a(h,g){b(this,{error:0,errorSummary:null,errorDescription:null,onload:null,replay:false,payload:g||null,request:h||null,silentError:false,is_last:true});return this;}b(a,{defaultErrorHandler:function(h){try{if(!h.silentError){a.verboseErrorHandler(h);}else h.logErrorByGroup('silent',10);}catch(g){alert(h);}},verboseErrorHandler:function(h){try{var summary=h.getErrorSummary();var desc=h.getErrorDescription();h.logErrorByGroup('popup',10);if(h.silentError&&desc=='')desc="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";Bootloader.loadComponents('dialog',function(){new Dialog().setTitle(summary).setBody(desc).setButtons([Dialog.OK]).setModal(true).setCausalElement(this.relativeTo).show();});}catch(g){alert(h);}}});b(a.prototype,{getRequest:function(){return this.request;},getPayload:function(){return this.payload;},getError:function(){return this.error;},getErrorSummary:function(){return this.errorSummary;},setErrorSummary:function(g){g=(g===undefined?null:g);this.errorSummary=g;return this;},getErrorDescription:function(){return this.errorDescription;},getErrorIsWarning:function(){return this.errorIsWarning;},logError:function(g,i){if(window.send_error_signal){var h={err_code:this.error,vip:(Env.vip||'-')};if(i!==undefined){h.duration=i.duration;h.xfb_ip=i.xfb_ip;}var j=this.request.getURI();h.path=j||'-';h.aid=this.request.userActionID;if(j&&j.indexOf('scribe_endpoint.php')!=-1)g='async_error_double';send_error_signal(g,JSON.stringify(h));}},logErrorByGroup:function(h,g){if(Math.floor(Math.random()*g)==0)if(this.error==1357010||this.error<15000){this.logError('async_error_oops_'+h);}else this.logError('async_error_logic_'+h);}});e.exports=a;});
__e("cookie",[],function(c,e,d,b){var a={set:function(f,g,i,j){if(Env.no_cookies&&f!='tpa')return;var h;if(i){var k=new Date();h=new Date();h.setTime(k.getTime()+i);}document.cookie=f+"="+encodeURIComponent(g)+"; "+(i?"expires="+h.toGMTString()+"; ":"")+"path="+(j||'/')+"; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');},clear:function(f){document.cookie=f+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; "+"path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');},get:function(i){var j=i+"=";var g=document.cookie.split(';');for(var h=0;h<g.length;h++){var f=g[h];while(f.charAt(0)==' ')f=f.substring(1,f.length);if(f.indexOf(j)===0)return decodeURIComponent(f.substring(j.length,f.length));}return null;}};d.exports=a;c.getCookie=a.get;c.setCookie=a.set;c.clearCookie=a.clear;},3);
__e("ua",[],function(b,d,c,a){var e={ie:function(){return e._populate()||this._ie;},ie64:function(){return e.ie()&&this._win64;},firefox:function(){return e._populate()||this._firefox;},opera:function(){return e._populate()||this._opera;},safari:function(){return e._populate()||this._safari;},chrome:function(){return e._populate()||this._chrome;},windows:function(){return e._populate()||this._windows;},osx:function(){return e._populate()||this._osx;},linux:function(){return e._populate()||this._linux;},iphone:function(){return e._populate()||this._iphone;},_populated:false,_populate:function(){if(e._populated)return;e._populated=true;var i=navigator.userAgent;var f=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(i);var h=/(Mac OS X)|(Windows)|(Linux)/.exec(i);var g=/\b(iPhone|iP[ao]d)/.exec(i);e._win64=!!(/Win64/.exec(i));if(f){e._ie=f[1]?parseFloat(f[1]):NaN;if(e._ie&&document.documentMode)e._ie=document.documentMode;e._firefox=f[2]?parseFloat(f[2]):NaN;e._opera=f[3]?parseFloat(f[3]):NaN;e._safari=f[4]?parseFloat(f[4]):NaN;if(e._safari){f=/(?:Chrome\/(\d+\.\d+))/.exec(i);e._chrome=f&&f[1]?parseFloat(f[1]):NaN;}else e._chrome=NaN;}else e._ie=e._firefox=e._opera=e._chrome=e._safari=NaN;if(h){if(h[1]){var j=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(i);e._osx=j?parseFloat(j[1].replace('_','.')):true;}else e._osx=false;e._windows=!!h[2];e._linux=!!h[3];}else e._osx=e._windows=e._linux=false;e._iphone=g;}};b.ua=c.exports=e;},3);
__e("eval-global",[],function(c,e,d,b){function a(h){if('string'!=typeof(h)){throw new Error('JS sent to eval_global is not a string.  Only strings '+'are permitted.');}else if(''==h)return;var i=document.createElement('script');i.type='text/javascript';try{i.appendChild(document.createTextNode(h));}catch(f){i.text=h;}var g=(document.getElementsByTagName("head")[0]||document.documentElement);g.appendChild(i);g.removeChild(i);}c.eval_global=b.eval_global=a;},3);
__e("dom-html",["function-extensions","ArrayUtils","ua","copyProperties","eval-global"],function(e,g,f,d){g('function-extensions');var a=g('ArrayUtils');var h=g('ua');var c=g('copyProperties');function b(i){if(i&&i.__html)i=i.__html;if(!(this instanceof b)){if(i instanceof b)return i;return new b(i);}this._content=i;this._defer=false;this._extra_action='';this._nodes=null;this._inline_js=bagofholding;this._ie_clone_bug=false;return this;}b.isHTML=function(i){return i&&(i instanceof b||i.__html!==undefined);};b.replaceJSONWrapper=function(i){return i&&i.__html!==undefined?new b(i.__html):i;};c(b.prototype,{toString:function(){var i=this._content||'';if(this._extra_action)i+='<script type="text/javascript">'+this._extra_action+'</scr'+'ipt>';return i;},setAction:function(i){this._extra_action=i;return this;},getAction:function(){this._fillCache();var i=function(){this._inline_js();var j=g('eval-global').eval_global;j(this._extra_action);}.bind(this);if(this.getDeferred()){return i.defer.bind(i);}else return i;},setDeferred:function(i){this._defer=!!i;return this;},getDeferred:function(){return this._defer;},getContent:function(){return this._content;},getNodes:function(){this._fillCache();return this._nodes;},getRootNode:function(){return this.getNodes()[0];},ieCloneBug:function(){this._fillCache();return this._ie_clone_bug;},_fillCache:function(){if(null!==this._nodes)return;var l=this._content;if(!l){this._nodes=[];return;}l=l.replace(/(<(\w+)[^>]*?)\/>/g,function(t,u,v){return v.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?t:u+'></'+v+'>';});var p=l.trim().toLowerCase(),s=document.createElement('div'),j=false;var r=(!p.indexOf('<opt')&&[1,'<select multiple="multiple" class="__WRAPPER">','</select>'])||(!p.indexOf('<leg')&&[1,'<fieldset class="__WRAPPER">','</fieldset>'])||(p.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,'<table class="__WRAPPER">','</table>'])||(!p.indexOf('<tr')&&[2,'<table><tbody class="__WRAPPER">','</tbody></table>'])||((!p.indexOf('<td')||!p.indexOf('<th'))&&[3,'<table><tbody><tr class="__WRAPPER">','</tr></tbody></table>'])||(!p.indexOf('<col')&&[2,'<table><tbody></tbody><colgroup class="__WRAPPER">','</colgroup></table>'])||null;if(null===r){s.className='__WRAPPER';if(h.ie()){r=[0,'<span style="display:none">&nbsp;</span>',''];j=true;}else r=[0,'',''];}s.innerHTML=r[1]+l+r[2];while(r[0]--)s=s.lastChild;if(j)s.removeChild(s.firstChild);s.className!='__WRAPPER';if(0!==s.getElementsByTagName('option').length||0!==s.getElementsByTagName('object').length)this._ie_clone_bug=true;if(h.ie()){var q;if(!p.indexOf('<table')&&-1==p.indexOf('<tbody')){q=s.firstChild&&s.firstChild.childNodes;}else if(r[1]=='<table>'&&-1==p.indexOf('<tbody')){q=s.childNodes;}else q=[];for(var n=q.length-1;n>=0;--n)if(q[n].nodeName&&q[n].nodeName.toLowerCase()=='tbody'&&q[n].childNodes.length==0)q[n].parentNode.removeChild(q[n]);}var o=s.getElementsByTagName('script');var i=[];for(var m=0;m<o.length;m++)if(o[m].src){i.push(Bootloader.requestResource.bind(Bootloader,'js',o[m].src));}else i.push(eval_global.bind(null,o[m].innerHTML));for(var m=o.length-1;m>=0;m--)o[m].parentNode.removeChild(o[m]);var k=function(){for(var t=0;t<i.length;t++)i[t]();};this._nodes=a.createFrom(s.childNodes);this._inline_js=k;}});e.HTML=f.exports=b;},3);
__e("ObjectUtils",["copyProperties","hasArrayNature"],function(d,g,f,c){var b=g("copyProperties");var e=g("hasArrayNature");var a={object:function(i){var h=new Function();h.prototype=i;return new h();},isScalar:function(h){return (/string|number|boolean/).test(typeof h);},getKeys:function(j){var i=[];for(var h in j)i.push(h);return i;},getValues:function(i){var j=[];for(var h in i)j.push(i[h]);return j;},countKeys:function(j){var h=0;for(var i in j)h++;return h;},areEqual:function(h,i){return JSON.stringify(h)==JSON.stringify(i);},merge:function(){var i={};for(var h=0;h<arguments.length;h++)b(i,arguments[h]);return i;},coalesce:function(){for(var h=0;h<arguments.length;++h)if(arguments[h]!=null)return arguments[h];return null;},createFrom:function(j,l){var k={};var i=e(l);if(typeof l=='undefined')l=true;for(var h=j.length;h--;)k[j[h]]=i?l[h]:l;return k;}};f.exports=a;});
__e("dom",["ArrayUtils","css-core","dom-html","ObjectUtils","dom-core","copyProperties"],function(k,m,l,i){var c=m('ArrayUtils');var d=m('css-core');var f=m('dom-html');var g=m('ObjectUtils');var a=m('dom-core').$;var h=m('copyProperties');var j=m('dom-core').ge;var e={find:function(n,p){var o=e.scry(n,p);return o[0];},scry:function(w,zi){if(!w)return [];var zj=zi.split(' ');var q=[w];var v=w===document;for(var z=0;z<zj.length;z++){if(q.length==0)break;if(zj[z]=='')continue;var zh=zj[z];var zf=[];var zq=false;if(zh.charAt(0)=='^')if(z==0){zq=true;zh=zh.slice(1);}else return [];zh=zh.replace(/\./g,' .');zh=zh.replace(/\#/g,' #');zh=zh.replace(/\[/g,' [');var zm=zh.split(' ');var zn=zm[0]||'*';var za=zm[1]&&zm[1].charAt(0)=='#';if(za){var u=j(zm[1].slice(1),true);if(u&&('*'==zn||u.tagName.toLowerCase()==zn))for(var zd=0;zd<q.length;zd++)if(zq&&e.contains(u,q[zd])){zf=[u];break;}else if(document==q[zd]||e.contains(q[zd],u)){zf=[u];break;}}else{var zp=[];var p=q.length;for(var zb=0;zb<p;zb++){if(zq){var x=[];var t=q[zb].parentNode;var n=zn=='*';while(e.isElementNode(t)){if(n||t.tagName.toLowerCase()==zn)x.push(t);t=t.parentNode;}}else var x=q[zb].getElementsByTagName(zn);var y=x.length;for(var ze=0;ze<y;ze++)zp.push(x[ze]);}for(var zk=1;zk<zm.length;zk++){var zl=zm[zk];var zc=zl.charAt(0)=='.';var r=zl.substring(1);for(var zb=0;zb<zp.length;zb++){var zo=zp[zb];if(!zo)continue;if(zc){if(!d.hasClass(zo,r))delete zp[zb];continue;}else{var s=zl.slice(1,zl.length-1);if(s.indexOf('=')==-1){if(zo.getAttribute(s)===null){delete zp[zb];continue;}}else{var zg=s.split('=');var o=zg[0];var zr=zg[1];zr=zr.slice(1,zr.length-1);if(zo.getAttribute(o)!=zr){delete zp[zb];continue;}}}}}for(var zb=0;zb<zp.length;zb++)if(zp[zb]){zf.push(zp[zb]);if(zq)break;}}q=zf;}return q;},getText:(function(){var n=document.createElement('div'),o=n.textContent!=null?'textContent':'innerText';return function(p){if(!p){return '';}else if(e.isTextNode(p)){return p.data;}else return p[o];};})(),getSelection:function(){var o=window.getSelection,n=document.selection;if(o){return o()+'';}else if(n)return n.createRange().text;return null;},create:function(p,n,o){p=document.createElement(p);if(n){n=h({},n);if(n.style){h(p.style,n.style);delete n.style;}for(var q in n)if(q.toLowerCase().indexOf('on')==0){if(!(typeof n[q]!='function'))if(window.Event&&Event.listen){Event.listen(p,q.substr(2),n[q]);}else p[q]=n[q];delete n[q];}h(p,n);}if(o!=undefined)e.setContent(p,o);return p;},prependContent:function(p,o){if(!e.isNode(p))throw new Error('DOM.prependContent: reference element is not a node');var n=function(q){if(p.firstChild){p.insertBefore(q,p.firstChild);}else p.appendChild(q);};return e._addContent(o,n,p);},insertAfter:function(p,o){if(!e.isNode(p)||!p.parentNode)throw new Error('DOM.insertAfter: reference element is not a node');var n=function(q){if(p.nextSibling){p.parentNode.insertBefore(q,p.nextSibling);}else p.parentNode.appendChild(q);};return e._addContent(o,n,p.parentNode);},insertBefore:function(o,p){if(!e.isNode(p)||!p.parentNode)throw new Error('DOM.insertBefore: reference element is not a node or '+'does not have a parent.');var n=function(q){p.parentNode.insertBefore(q,p);};return e._addContent(o,n,p.parentNode);},setContent:function(o,n){if(!e.isNode(o))throw new Error('DOM.setContent: reference element is not a node');e.empty(o);return e.appendContent(o,n);},appendContent:function(p,o){if(!e.isNode(p))throw new Error('DOM.appendContent: reference element is not a node');var n=function(q){p.appendChild(q);};return e._addContent(o,n,p);},replace:function(p,o){if(!e.isNode(p)||!p.parentNode)throw new Error('DOM.replace: reference element must be a node with a'+' parent');var n=function(q){p.parentNode.replaceChild(q,p);};return e._addContent(o,n,p.parentNode);},remove:function(n){n=a(n);if(n.parentNode)n.parentNode.removeChild(n);},empty:function(n){n=a(n);while(n.firstChild)e.remove(n.firstChild);},contains:function(o,n){o=j(o);n=j(n);if(!o||!n){return false;}else if(o===n){return true;}else if(e.isTextNode(o)){return false;}else if(e.isTextNode(n)){return e.contains(o,n.parentNode);}else if(o.contains){return o.contains(n);}else if(o.compareDocumentPosition){return !!(o.compareDocumentPosition(n)&16);}else return false;},getRootElement:function(){var n=null;if(window.Quickling&&Quickling.isActive())n=j('content');return n||document.body;},isNode:function(n){return !!(n&&(typeof Node=='object'?n instanceof Node:typeof n=="object"&&typeof n.nodeType=='number'&&typeof n.nodeName=='string'));},isNodeOfType:function(o,p){var q=c.createFrom(p).join('|').toUpperCase().split('|');var n=g.createFrom(q);return e.isNode(o)&&o.nodeName in n;},isElementNode:function(n){return e.isNode(n)&&n.nodeType==1;},isTextNode:function(n){return e.isNode(n)&&n.nodeType==3;},_addContent:function(q,n,z){q=f.replaceJSONWrapper(q);if(q instanceof f&&-1==q.toString().indexOf('<scr'+'ipt')&&''==z.innerHTML){var t=ua.ie();if(!t||(t>7&&!e.isNodeOfType(z,['table','tbody','thead','tfoot','tr','select','fieldset']))){var u=t?"<em style=\"display:none;\">&nbsp;</em>":"";z.innerHTML=u+q;t&&z.removeChild(z.firstChild);return c.createFrom(z.childNodes);}}else if(e.isTextNode(z)){z.data=q;return [q];}var w,r=[],o=[];var s=document.createDocumentFragment();if(!(q instanceof Array))q=[q];for(var v=0;v<q.length;v++){w=f.replaceJSONWrapper(q[v]);if(w instanceof f){o.push(w.getAction());var y=w.getNodes(),p;for(var x=0;x<y.length;x++){p=(ua.safari()||(ua.ie()&&w.ieCloneBug()))?y[x]:y[x].cloneNode(true);r.push(p);s.appendChild(p);}}else if(g.isScalar(w)){var za=document.createTextNode(w);r.push(za);s.appendChild(za);}else if(e.isNode(w)){r.push(w);s.appendChild(w);}else if(!(w instanceof Array))w!==null;}n(s);for(var v=0;v<o.length;v++)o[v]();return r;}};function b(p,n,o){if(typeof n!='object'||e.isNode(n)||n instanceof Array||f.isHTML(n)){o=n;n=null;}return e.create(p,n,o);}k.$N=e.$N=b;k.DOM=l.exports=e;},3);
__e("uri",["dom","copyProperties"],function(e,g,f,d){var a=g('dom');var c=g('copyProperties');function b(h){if(!(this instanceof b))return new b(h||window.location.href);this.parse(h||'');}c(b,{getRequestURI:function(h,i){h=h===undefined||h;if(h&&window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getCurrentURI(!!i).getQualifiedURI();}else return new b(window.location.href);},getMostRecentURI:function(){if(window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getMostRecentURI().getQualifiedURI();}else return new b(window.location.href);},getNextURI:function(){if(window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getNextURI().getQualifiedURI();}else return new b(window.location.href);},expression:/(((\w+):\/\/)([^\/:]*)(:(\d+))?)?([^#?]*)(\?([^#]*))?(#(.*))?/,arrayQueryExpression:/^(\w+)((?:\[\w*\])+)=?(.*)/,explodeQuery:function(n){if(!n)return {};var o={};n=n.replace(/%5B/ig,'[').replace(/%5D/ig,']');n=n.split('&');for(var i=0,k=n.length;i<k;i++){var l=n[i].match(b.arrayQueryExpression);if(!l){var q=n[i].split('=');o[b.decodeComponent(q[0])]=q[1]===undefined?null:b.decodeComponent(q[1]);}else{var j=l[2].split(/\]\[|\[|\]/).slice(0,-1);var m=l[1];var r=b.decodeComponent(l[3]||'');j[0]=m;var p=o;for(var h=0;h<j.length-1;h++)if(j[h]){if(p[j[h]]===undefined)if(j[h+1]&&!j[h+1].match(/\d+$/)){p[j[h]]={};}else p[j[h]]=[];p=p[j[h]];}else{if(j[h+1]&&!j[h+1].match(/\d+$/)){p.push({});}else p.push([]);p=p[p.length-1];}if(p instanceof Array&&j[j.length-1]==''){p.push(r);}else p[j[j.length-1]]=r;}}return o;},implodeQuery:function(m,l,h){l=l||'';if(h===undefined)h=true;var n=[];if(m===null||m===undefined){n.push(h?b.encodeComponent(l):l);}else if(m instanceof Array){for(var j=0;j<m.length;++j)try{if(m[j]!==undefined)n.push(b.implodeQuery(m[j],l?(l+'['+j+']'):j));}catch(i){}}else if(typeof(m)=='object'){if(a.isNode(m)){n.push('{node}');}else for(var k in m)try{if(m[k]!==undefined)n.push(b.implodeQuery(m[k],l?(l+'['+k+']'):k));}catch(i){}}else if(h){n.push(b.encodeComponent(l)+'='+b.encodeComponent(m));}else n.push(l+'='+m);return n.join('&');},encodeComponent:function(k){var j=String(k).split(/([\[\]])/);for(var h=0,i=j.length;h<i;h+=2)j[h]=encodeURIComponent(j[h]);return j.join('');},decodeComponent:function(h){return decodeURIComponent(h.replace(/\+/g,' '));},INVALID_DOMAIN:'invalid.invalid',sanitizeDomain:function(h){var i=new RegExp('[\\x00-\\x2c\\x2f\\x3b-\\x40\\x5c\\x5e\\x60\\x7b-\\x7f'+'\\uFDD0-\\uFDEF\\uFFF0-\\uFFFF'+'\\u2047\\u2048\\uFE56\\uFE5F\\uFF03\\uFF0F\\uFF1F]');if(i.test(h)){return b.INVALID_DOMAIN;}else return h;}});c(b.prototype,{parse:function(i){var h=i.toString().match(b.expression);c(this,{protocol:h[3]||'',domain:b.sanitizeDomain(h[4]||''),port:h[6]||'',path:h[7]||'',query_s:h[9]||'',fragment:h[11]||''});return this;},setProtocol:function(h){this.protocol=h;return this;},getProtocol:function(){return this.protocol;},setQueryData:function(h){this.query_s=b.implodeQuery(h);return this;},addQueryData:function(h){return this.setQueryData(c(this.getQueryData(),h));},removeQueryData:function(i){if(!(i instanceof Array))i=[i];var k=this.getQueryData();for(var h=0,j=i.length;h<j;++h)delete k[i[h]];return this.setQueryData(k);},getQueryData:function(){return b.explodeQuery(this.query_s);},setFragment:function(h){this.fragment=h;return this;},getFragment:function(){return this.fragment;},setDomain:function(h){this.domain=b.sanitizeDomain(h);return this;},getDomain:function(){return this.domain;},setPort:function(h){this.port=h;return this;},getPort:function(){return this.port;},setPath:function(h){this.path=h;return this;},getPath:function(){return this.path.replace(/^\/+/,'/');},isEmpty:function(){return !(this.path||this.protocol||this.domain||this.port||this.query_s||this.fragment);},toString:function(){var h='';this.protocol&&(h+=this.protocol+'://');this.domain&&(h+=this.domain);this.port&&(h+=':'+this.port);if(this.domain&&!this.path)h+='/';this.path&&(h+=this.path);this.query_s&&(h+='?'+this.query_s);this.fragment&&(h+='#'+this.fragment);return h;},valueOf:function(){return this.toString();},isFacebookURI:function(){if(!b._facebookURIRegex)b._facebookURIRegex=new RegExp('(^|\\.)facebook\\.com([^.]*)$','i');return (!this.domain||b._facebookURIRegex.test(this.domain));},isQuicklingEnabled:function(){return window.Quickling&&Quickling.isActive()&&Quickling.isPageActive(this);},getRegisteredDomain:function(){if(!this.domain)return '';if(!this.isFacebookURI())return null;var i=this.domain.split('.');var h=i.indexOf('facebook');return i.slice(h).join('.');},getUnqualifiedURI:function(){return new b(this).setProtocol(null).setDomain(null).setPort(null);},getQualifiedURI:function(){var i=new b(this);if(!i.getDomain()){var h=b();i.setProtocol(h.getProtocol()).setDomain(h.getDomain()).setPort(h.getPort());}return i;},isSameOrigin:function(h){var i=h||window.location.href;if(!(i instanceof b))i=new b(i.toString());if(this.getProtocol()&&this.getProtocol()!=i.getProtocol())return false;if(this.getDomain()&&this.getDomain()!=i.getDomain())return false;return true;},go:function(h){goURI(this,h);},setSubdomain:function(i){var j=new b(this).getQualifiedURI();var h=j.getDomain().split('.');if(h.length<=2){h.unshift(i);}else h[0]=i;return j.setDomain(h.join('.'));},getSubdomain:function(){if(!this.getDomain())return '';var h=this.getDomain().split('.');if(h.length<=2){return '';}else return h[0];},setSecure:function(h){return this.setProtocol(h?'https':'http');},isSecure:function(){return this.getProtocol()=='https';}});e.URI=f.exports=b;},3);
__e("goURI",[],function(b,e,d,a){function c(g,f){g=g.toString();if(!f&&b.PageTransitions&&PageTransitions.isInitialized()){PageTransitions.go(g);}else if(window.location.href==g){window.location.reload();}else window.location.href=g;}d.exports=c;});
__e("invokeCallbacks",[],function(b,e,d,a){function c(g,i){if(g)for(var h=0;h<g.length;h++)try{(new Function(g[h])).apply(i);}catch(f){}}d.exports=c;});
__e("AsyncRequest",["array-extensions","AsyncResponse","bootloader","cookie","css-core","dom","parent","uri","util","bind","copyProperties","goURI","invokeCallbacks","isEmpty","eval-global"],function(global,require,module,exports){require("array-extensions");var AsyncResponse=require("AsyncResponse");var Bootloader=require("bootloader");var Cookie=require("cookie");var CSS=require("css-core");var DOM=require("dom");var Parent=require("parent");var URI=require("uri");var Util=require("util");var bind=require("bind");var copyProperties=require("copyProperties");var goURI=require("goURI");var invokeCallbacks=require("invokeCallbacks");var isEmpty=require("isEmpty");function AsyncRequest(uri){var dispatchResponse=bind(this,function(asyncResponse){try{this.clearStatusIndicator();if(!this.isRelevant()){invokeErrorHandler(1010);return;}if(this.initialHandler(asyncResponse)!==false){clearTimeout(this.timer);asyncResponse.jscc&&invokeCallbacks([asyncResponse.jscc]);if(this.handler)try{var suppress_onload=this.handler(asyncResponse);}catch(exception){asyncResponse.is_last&&this.finallyHandler(asyncResponse);throw exception;}if(suppress_onload!==AsyncRequest.suppressOnloadToken){var onload=asyncResponse.onload;if(onload)for(var ii=0;ii<onload.length;ii++)try{(new Function(onload[ii])).apply(this);}catch(exception){}if(this.lid)Arbiter.inform('tti_ajax',{s:this.lid,d:[this._sendTimeStamp||0,(this._sendTimeStamp&&this._responseTime)?(this._responseTime-this._sendTimeStamp):0]},Arbiter.BEHAVIOR_EVENT);var onafterload=asyncResponse.onafterload;if(onafterload)for(var ii=0;ii<onafterload.length;ii++)try{(new Function(onafterload[ii])).apply(this);}catch(exception){}}asyncResponse.is_last&&this.finallyHandler(asyncResponse);}}catch(exception){}});var dispatchErrorResponse=bind(this,function(asyncResponse,isTransport){try{this.clearStatusIndicator();var async_error=asyncResponse.getError();if(this._sendTimeStamp){var _duration=Date.now()-this._sendTimeStamp;var xfb_ip=this._xFbServer||'-';asyncResponse.logError('async_error',{duration:_duration,xfb_ip:xfb_ip});}else asyncResponse.logError('async_error');if((!this.isRelevant())||async_error===1010)return;if(async_error==1357008||async_error==1357007||async_error==1442002||async_error==1357001){var is_confirmation=false;if(async_error==1357008||async_error==1357007)is_confirmation=true;var payload=asyncResponse.getPayload();this._displayServerDialog(payload.__dialog,is_confirmation);}else if(this.initialHandler(asyncResponse)!==false){clearTimeout(this.timer);try{if(isTransport){this.transportErrorHandler(asyncResponse);}else this.errorHandler(asyncResponse);}catch(exception){this.finallyHandler(asyncResponse);throw exception;}this.finallyHandler(asyncResponse);}}catch(exception){}});var _interpretTransportResponse=bind(this,function(){if(this.getOption('suppressEvaluation')){var r=new AsyncResponse(this,this.transport);return {asyncResponse:r};}var _sendError=function(p,error_code,str){if(!window.send_error_signal)return;if(this._xFbServer){error_code='1008_'+error_code;}else error_code='1012_'+error_code;send_error_signal('async_xport_resp',error_code+':'+(this._xFbServer||'-')+':'+p.getURI()+':'+str.length+':'+str.substr(0,1600));};var shield="for (;;);";var shieldlen=shield.length;var text=this.transport.responseText;if(text.length<=shieldlen){_sendError(this,'empty',text);return {transportError:'Response too short on async to '+this.getURI()};}var offset=0;while(text.charAt(offset)==" "||text.charAt(offset)=="\n")offset++;offset&&text.substring(offset,offset+shieldlen)==shield;var safeResponse=text.substring(offset+shieldlen);try{var response=eval('('+safeResponse+')');}catch(exception){_sendError(this,'excep',text);return {transportError:'eval() failed on async to '+this.getURI()};}return interpretResponse(response);});var interpretResponse=bind(this,function(response){if(response.redirect)return {redirect:response.redirect};var r=new AsyncResponse(this);if(response.__ar!=1){r.payload=response;}else{copyProperties(r,response);if(response.tplts)if(window.DynaTemplate)DynaTemplate.registerTemplates(response.tplts);}return {asyncResponse:r};});var invokeResponseHandler=bind(this,function(interp){if(typeof(interp.redirect)!='undefined'){(function(){this.setURI(interp.redirect).send();}).bind(this).defer();return;}if(this.handler||this.errorHandler||this.transportErrorHandler)if(typeof(interp.asyncResponse)!='undefined'){var r=interp.asyncResponse;if(!this.isRelevant()){invokeErrorHandler(1010);return;}if(r.inlinejs){var eval_global=require("eval-global").eval_global;eval_global(r.inlinejs);}if(r.lid){this._responseTime=Date.now();if(window.CavalryLogger)this.cavalry=CavalryLogger.getInstance(r.lid);this.lid=r.lid;}if(r.getError()&&!r.getErrorIsWarning()){var fn=dispatchErrorResponse;}else var fn=dispatchResponse;Bootloader.setResourceMap(r.resource_map);if(r.bootloadable)Bootloader.enableBootload(r.bootloadable);fn=fn.shield(null,r);fn=fn.defer.bind(fn);var is_transitional=false;if(this.preBootloadHandler)is_transitional=this.preBootloadHandler(r);r.css=r.css||[];r.js=r.js||[];Bootloader.loadResources(r.css.concat(r.js),fn,is_transitional,this.getURI());}else if(typeof(interp.transportError)!='undefined'){if(this._xFbServer){invokeErrorHandler(1008);}else invokeErrorHandler(1012);}else invokeErrorHandler(1007);});var invokeErrorHandler=bind(this,function(explicitError){try{if(!window.loaded&&!this.getOption('handleErrorAfterUnload'))return;}catch(ex){return;}var r=new AsyncResponse(this);var err;try{err=explicitError||this.transport.status||1004;}catch(ex){err=1005;}if(this._requestAborted)err=1011;try{if(this.responseText=='')err=1002;}catch(ignore){}if(this.transportErrorHandler){var desc,summary;var silent=true;if(false===navigator.onLine){summary="No Network Connection";desc="Your browser appears to be offline. Please check your internet connection and try again.";err=1006;}else if(err>=300&&err<=399){summary="Redirection";desc="Your access to Facebook was redirected or blocked by a third party at this time, please contact your ISP or reload. ";redir_url=this.transport.getResponseHeader("Location");if(redir_url)goURI(redir_url,true);silent=true;}else{summary="Oops!";desc="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";}!this.getOption('suppressErrorAlerts');copyProperties(r,{error:err,errorSummary:summary,errorDescription:desc,silentError:silent});dispatchErrorResponse(r,true);}});var handleResponse=function(response){var asyncResponse=this.interpretResponse(response);this.invokeResponseHandler(asyncResponse);};var onStateChange=function(){try{if(this.transport.readyState==4){AsyncRequest._inflightPurge();try{if(typeof(this.transport.getResponseHeader)!='undefined'&&this.transport.getResponseHeader('X-FB-Server'))this._xFbServer=this.transport.getResponseHeader('X-FB-Server');}catch(ex){}if(this.transport.status>=200&&this.transport.status<300){invokeResponseHandler(_interpretTransportResponse());}else if(ua.safari()&&(typeof(this.transport.status)=='undefined')){invokeErrorHandler(1002);}else if(window.Env&&window.Env.retry_ajax_on_network_error&&this.transport.status in {0:1,12029:1,12030:1,12031:1,12152:1}&&this.remainingRetries>0){--this.remainingRetries;delete this.transport;this.send(true);return;}else invokeErrorHandler();if(this.getOption('asynchronous')!==false)delete this.transport;}}catch(exception){try{if(!window.loaded)return;}catch(ex){return;}delete this.transport;if(this.remainingRetries>0){--this.remainingRetries;this.send(true);}else{!this.getOption('suppressErrorAlerts');if(window.send_error_signal)send_error_signal('async_xport_resp','1007:'+(this._xFbServer||'-')+':'+this.getURI()+':'+exception.message);invokeErrorHandler(1007);}}};var onJSONPResponse=function(data,more_chunked_response){var is_first=(this.is_first===undefined);this.is_first=is_first;if(this.transportIframe&&!more_chunked_response){if(this.cavalry)this.cavalry.collectBrowserTiming(this.transportIframe.contentWindow);(function(x){document.body.removeChild(x);}).bind(null,this.transportIframe).defer();}if(ua.ie()>=9&&window.JSON)data=window.JSON.parse(window.JSON.stringify(data));var r=this.interpretResponse(data);r.asyncResponse.is_first=is_first;r.asyncResponse.is_last=!more_chunked_response;this.invokeResponseHandler(r);return more_chunked_response;};copyProperties(this,{onstatechange:onStateChange,onjsonpresponse:onJSONPResponse,invokeResponseHandler:invokeResponseHandler,interpretResponse:interpretResponse,handleResponse:handleResponse,transport:null,method:'POST',uri:'',timeout:null,timer:null,initialHandler:bagofholding,handler:null,errorHandler:null,transportErrorHandler:null,timeoutHandler:null,finallyHandler:bagofholding,serverDialogCancelHandler:bagofholding,relativeTo:null,statusElement:null,statusClass:'',data:{},file:null,context:{},readOnly:false,writeRequiredParams:['post_form_id'],remainingRetries:0,option:{asynchronous:true,suppressErrorHandlerWarning:false,suppressEvaluation:false,suppressErrorAlerts:false,retries:0,jsonp:false,bundle:false,useIframeTransport:false,tfbEndpoint:true,handleErrorAfterUnload:false},userActionID:'-'});this.errorHandler=AsyncResponse.defaultErrorHandler;this.transportErrorHandler=bind(this,'errorHandler');if(uri!=undefined)this.setURI(uri);return this;}Arbiter.subscribe("page_transition",function(type,message){AsyncRequest._id_threshold=message.id;});copyProperties(AsyncRequest,{receiveJSONPResponse:function(id,data,more_chunked_response){if(this._JSONPReceivers[id]){if(!this._JSONPReceivers[id](data,more_chunked_response))delete this._JSONPReceivers[id];}else if(window.logJSError&&!more_chunked_response){var uri=(data.payload&&data.payload.uri)||'';logJSError('ajax',{error:'UnexpectedJsonResponse',extra:{id:id,uri:uri}});}},_bundleRequest:function(request){if(request.getOption('jsonp')||request.getOption('useIframeTransport')){request.setOption('bundle',false);return false;}else if(!request.uri.isFacebookURI()){request.setOption('bundle',false);return false;}else if(!request.getOption('asynchronous')){request.setOption('bundle',false);return false;}var path=request.uri.getPath();if(!AsyncRequest._bundleTimer)AsyncRequest._bundleTimer=setTimeout(function(){AsyncRequest._sendBundledRequests();},0);AsyncRequest._allBundledRequests.push([path,request]);return true;},_sendBundledRequests:function(){clearTimeout(AsyncRequest._bundleTimer);AsyncRequest._bundleTimer=null;var bundled_requests=AsyncRequest._allBundledRequests;AsyncRequest._allBundledRequests=[];if(bundled_requests.length==1){var request=bundled_requests[0][1];request.setOption('bundle',false).send();return request;}if(bundled_requests.length===0)return null;var data=[];for(var ii=0;ii<bundled_requests.length;ii++)data.push([bundled_requests[ii][0],URI.implodeQuery(bundled_requests[ii][1].data)]);var query_data={data:data};var request=new AsyncRequest();request.setURI('/ajax/proxy.php').setData(query_data).setMethod('POST').setInitialHandler(bagof(true)).setAllowCrossPageTransition(true).setHandler(function(r){var payload=r.getPayload();var responses=payload.responses;if(responses.length!=bundled_requests.length){return;}else for(var ii=0;ii<bundled_requests.length;ii++){var path=bundled_requests[ii][0];var request=bundled_requests[ii][1];request.id=this.id;if(responses[ii][0]!=path){request.invokeResponseHandler({transportError:'Wrong response order in bundled request to '+path});continue;}var asyncResponse=request.interpretResponse(responses[ii][1]);request.invokeResponseHandler(asyncResponse);}}).setTransportErrorHandler(function(response){var paths=[];var interp={transportError:response.errorDescription};for(var ii=0;ii<bundled_requests.length;ii++){var path=bundled_requests[ii][0];var request=bundled_requests[ii][1];paths.push(path);request.id=this.id;request.invokeResponseHandler(interp);}}).send();return request;},bootstrap:function(href,elem,is_post){var method='GET';var readonly=true;var data={};if(is_post||elem&&(elem.rel=='async-post'||elem.getAttribute&&elem.getAttribute('forcemethod')=='post')){method='POST';readonly=false;if(href){href=URI(href);data=href.getQueryData();href.setQueryData({});}}var status_elem=Parent.byClass(elem,'stat_elem')||elem;if(status_elem&&CSS.hasClass(status_elem,'async_saving'))return false;var async=new AsyncRequest(href).setReadOnly(readonly).setMethod(method).setData(data).setNectarModuleDataSafe(elem).setRelativeTo(elem);if(status_elem){async.setStatusElement(status_elem);var status_class=status_elem.getAttribute('data-status-class');status_class&&async.setStatusClass(status_class);}async.send();return false;},post:function(href,data){new AsyncRequest(href).setReadOnly(false).setMethod('POST').setData(data).send();return false;},getLastId:function(){return AsyncRequest._last_id;},_JSONPReceivers:{},_allBundledRequests:[],_bundleTimer:null,suppressOnloadToken:{},_last_id:2,_id_threshold:2,_inflight:[],_inflightAdd:bagofholding,_inflightPurge:bagofholding,_inflightEnable:function(){if(ua.ie()){copyProperties(AsyncRequest,{_inflightAdd:function(ar){this._inflight.push(ar);},_inflightPurge:function(){AsyncRequest._inflight=AsyncRequest._inflight.filter(function(ar){return ar.transport&&ar.transport.readyState<4;});}});onunloadRegister(function(){AsyncRequest._inflight.each(function(ar){if(ar.transport&&ar.transport.readyState<4){ar.transport.abort();delete ar.transport;}});});}}});copyProperties(AsyncRequest.prototype,{setMethod:function(m){this.method=m.toString().toUpperCase();return this;},getMethod:function(){return this.method;},setData:function(obj){this.data=obj;return this;},setFile:function(file){this.file=file;return this;},getData:function(){return this.data;},setContextData:function(key,value,enabled){enabled=enabled===undefined?true:enabled;if(enabled)this.context['_log_'+key]=value;return this;},_setUserActionID:function(){var ue=window.ArbiterMonitor&&ArbiterMonitor.getUE()||'-';this.userActionID=(window.EagleEye&&EagleEye.getSessionID()||'-')+'/'+ue;},setURI:function(uri){var uri_obj=URI(uri);if(this.getOption('useIframeTransport')&&!uri_obj.isFacebookURI())return this;if(!this.getOption('jsonp')&&!this.getOption('useIframeTransport')&&!uri_obj.isSameOrigin())return this;this._setUserActionID();if(!uri||uri_obj.isEmpty()){if(window.send_error_signal&&window.get_error_stack){var data={err_code:1013,vip:'-',duration:0,xfb_ip:'-',path:window.location.href,aid:this.userActionID};send_error_signal('async_error',JSON.stringify(data));send_error_signal('async_xport_stack','1013:'+window.location.href+'::'+get_error_stack());}return this;}this.uri=uri_obj;return this;},getURI:function(){return this.uri.toString();},setInitialHandler:function(fn){this.initialHandler=fn;return this;},setHandler:function(fn){if(!(typeof(fn)!='function'))this.handler=fn;return this;},getHandler:function(){return this.handler;},setErrorHandler:function(fn){if(!(typeof(fn)!='function'))this.errorHandler=fn;return this;},setTransportErrorHandler:function(fn){this.transportErrorHandler=fn;return this;},getErrorHandler:function(){return this.errorHandler;},getTransportErrorHandler:function(){return this.transportErrorHandler;},setTimeoutHandler:function(timeout,fn){if(!(typeof(fn)!='function')){this.timeout=timeout;this.timeoutHandler=fn;}return this;},resetTimeout:function(timeout){if(!(this.timeoutHandler===null))if(timeout===null){this.timeout=null;clearTimeout(this.timer);this.timer=null;}else{var clear_on_quickling_event=!this._allowCrossPageTransition;this.timeout=timeout;clearTimeout(this.timer);this.timer=this._handleTimeout.bind(this).defer(this.timeout,clear_on_quickling_event);}return this;},_handleTimeout:function(){this.abandon();this.timeoutHandler(this);},setNewSerial:function(){this.id=++AsyncRequest._last_id;return this;},setFinallyHandler:function(fn){this.finallyHandler=fn;return this;},setServerDialogCancelHandler:function(fn){this.serverDialogCancelHandler=fn;return this;},setPreBootloadHandler:function(fn){this.preBootloadHandler=fn;return this;},setReadOnly:function(readOnly){if(!(typeof(readOnly)!='boolean'))this.readOnly=readOnly;return this;},setFBMLForm:function(){this.writeRequiredParams=["fb_sig"];return this;},getReadOnly:function(){return this.readOnly;},setRelativeTo:function(element){this.relativeTo=element;return this;},getRelativeTo:function(){return this.relativeTo;},setStatusClass:function(c){this.statusClass=c;return this;},setStatusElement:function(element){this.statusElement=element;return this;},getStatusElement:function(){return ge(this.statusElement);},isRelevant:function(){if(this._allowCrossPageTransition)return true;if(!this.id)return true;return this.id>AsyncRequest._id_threshold;},clearStatusIndicator:function(){var statusElem=this.getStatusElement();if(statusElem){CSS.removeClass(statusElem,'async_saving');CSS.removeClass(statusElem,this.statusClass);}},addStatusIndicator:function(){var statusElem=this.getStatusElement();if(statusElem){CSS.addClass(statusElem,'async_saving');CSS.addClass(statusElem,this.statusClass);}},specifiesWriteRequiredParams:function(){return this.writeRequiredParams.every(function(param){this.data[param]=this.data[param]||Env[param]||(ge(param)||{}).value;if(this.data[param]!==undefined)return true;return false;},this);},setOption:function(opt,v){if(typeof(this.option[opt])!='undefined')this.option[opt]=v;return this;},getOption:function(opt){typeof(this.option[opt])=='undefined';return this.option[opt];},abort:function(){if(this.transport){var old_handler=this.getTransportErrorHandler();this.setOption('suppressErrorAlerts',true);this.setTransportErrorHandler(bagofholding);this._requestAborted=1;this.transport.abort();this.setTransportErrorHandler(old_handler);}},abandon:function(){clearTimeout(this.timer);this.setOption('suppressErrorAlerts',true).setHandler(bagofholding).setErrorHandler(bagofholding).setTransportErrorHandler(bagofholding);if(this.transport){this._requestAborted=1;this.transport.abort();}},setNectarData:function(nctrParams){if(nctrParams){if(this.data.nctr===undefined)this.data.nctr={};copyProperties(this.data.nctr,nctrParams);}return this;},setNectarModuleDataSafe:function(elem){if(this.setNectarModuleData)this.setNectarModuleData(elem);return this;},setNectarImpressionIdSafe:function(){if(this.setNectarImpressionId)this.setNectarImpressionId();return this;},setAllowCrossPageTransition:function(allow){this._allowCrossPageTransition=!!allow;if(this.timer)this.resetTimeout(this.timeout);return this;},send:function(isRetry){isRetry=isRetry||false;if(!this.uri)return false;!this.errorHandler&&!this.getOption('suppressErrorHandlerWarning');if(this.getOption('jsonp')&&this.method!='GET')this.setMethod('GET');if(this.getOption('useIframeTransport')&&this.method!='GET')this.setMethod('GET');this.timeoutHandler!==null&&(this.getOption('jsonp')||this.getOption('useIframeTransport'));if(!this.getReadOnly()){this.specifiesWriteRequiredParams();if(this.method!='POST')return false;}if(this.method=='POST'&&this.getOption('tfbEndpoint')){this.data.fb_dtsg=Env.fb_dtsg;this.data.lsd=getCookie('lsd');}if(!isEmpty(this.context)&&this.getOption('tfbEndpoint')){copyProperties(this.data,this.context);this.data.ajax_log=1;}if(window.Env&&Env.force_param)copyProperties(this.data,Env.force_param);if(!this.getReadOnly()&&this.getOption('tfbEndpoint')&&this.method=='POST'&&this.data.post_form_id_source===undefined)this.data.post_form_id_source='AsyncRequest';if(window.Env)this.data.__user=Env.user;this._setUserActionID();if(this.getOption('bundle')&&AsyncRequest._bundleRequest(this))return true;this.setNewSerial();if(this.getOption('tfbEndpoint')){this.uri.addQueryData({__a:1});if(Env.fb_isb)this.uri.addQueryData({fb_isb:Env.fb_isb});}this.finallyHandler=async_callback(this.finallyHandler,'final');var uri_str,query;if(this.method=='GET'||this.file){uri_str=this.uri.addQueryData(this.data).toString();query='';}else{uri_str=this.uri.toString();query=URI.implodeQuery(this.data);}if(this.getOption('jsonp')||this.getOption('useIframeTransport')){uri_str=this.uri.addQueryData({__a:this.id}).toString();AsyncRequest._JSONPReceivers[this.id]=async_callback(bind(this,'onjsonpresponse'),'json');if(this.getOption('jsonp')){(function(){document.body.appendChild($N('script',{src:uri_str,type:"text/javascript"}));}).bind(this).defer();}else{var style={position:'absolute',top:'-9999999px',width:'80px',height:'80px'};this.transportIframe=$N('iframe',{src:"javascript:''",style:style});document.body.appendChild(this.transportIframe);this.transportIframe.src=uri_str;}return true;}if(this.transport)return false;var transport=null;try{transport=new XMLHttpRequest();}catch(ignored){}if(!transport)try{transport=new ActiveXObject("Msxml2.XMLHTTP");}catch(ignored){}if(!transport)try{transport=new ActiveXObject("Microsoft.XMLHTTP");}catch(ignored){}if(!transport)return false;transport.onreadystatechange=async_callback(bind(this,'onstatechange'),'xhr');if(!isRetry)this.remainingRetries=this.getOption('retries');if(window.send_error_signal||window.ArbiterMonitor)this._sendTimeStamp=this._sendTimeStamp||Date.now();this.transport=transport;try{this.transport.open(this.method,uri_str,this.getOption('asynchronous'));}catch(ex){return false;}var svn_rev=Env.svn_rev;if(svn_rev)this.transport.setRequestHeader('X-SVN-Rev',String(svn_rev));if(this.method=='POST')this.transport.setRequestHeader('Content-Type','application/x-www-form-urlencoded');this.addStatusIndicator();query=this.file||query;this.transport.send(query);if(this.timeout!==null)this.resetTimeout(this.timeout);AsyncRequest._inflightAdd(this);return true;},_displayServerDialog:function(model,is_confirmation){Bootloader.loadComponents('dialog',function(){var dialog=new Dialog(model);if(is_confirmation)dialog.setHandler(this._displayConfirmationHandler.bind(this,dialog));dialog.setCancelHandler(function(){this.serverDialogCancelHandler.apply(this,arguments);this.finallyHandler.apply(this,arguments);}.bind(this)).setCausalElement(this.relativeTo).setCloseHandler(this.finallyHandler.bind(this)).show();}.bind(this));},_displayConfirmationHandler:function(dialog){this.data.confirmed=1;copyProperties(this.data,dialog.getFormData());this.send();}});module.exports=AsyncRequest;});
__e("async",["AsyncRequest","AsyncResponse"],function(a,b){a.AsyncRequest=b('AsyncRequest');a.AsyncResponse=b('AsyncResponse');},3);
__e("object-core-utils",["isEmpty","copyProperties"],function(c,e,d,b){c.is_empty=e('isEmpty');c.copy_properties=e('copyProperties');function a(f,g){return copy_properties(window[f]||(window[f]={}),g);}c.add_properties=b.add_properties=a;},3);
InitialJSLoader=window.InitialJSLoader||{INITIAL_JS_READY:'BOOTLOAD/JSREADY',load:function(a){InitialJSLoader.callback=Bootloader.loadResources(a,InitialJSLoader.callback);},callback:Arbiter.registerCallback(function(){Arbiter.inform(InitialJSLoader.INITIAL_JS_READY,true,Arbiter.BEHAVIOR_STATE);},[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK])};
function _onloadHook(){!window.loaded&&window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_prehooks');_runHooks('onloadhooks');!window.loaded&&window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_hooks');window.loaded=true;Arbiter.inform('uipage_onload',true,Arbiter.BEHAVIOR_STATE);}function _onafterloadHook(){_runHooks('onafterloadhooks');window.afterloaded=true;}function _runHook(b){try{return b();}catch(a){}}function _runHooks(b){var d=b=='onbeforeleavehooks'||b=='onbeforeunloadhooks';var e=null;do{var a=window[b];if(!d)window[b]=null;if(!a)break;for(var c=0;c<a.length;c++)if(d){e=e||_runHook(a[c]);}else _runHook(a[c]);if(d)break;}while(window[b]);if(d&&e)return e;}function keep_window_set_as_loaded(){if(window.loaded==false){window.loaded=true;_runHooks('onloadhooks');}if(window.afterloaded==false){window.afterloaded=true;_runHooks('onafterloadhooks');}}Arbiter.registerCallback(_onloadHook,[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,InitialJSLoader.INITIAL_JS_READY]);Arbiter.registerCallback(_onafterloadHook,[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,OnloadEvent.ONLOAD_CALLBACK,InitialJSLoader.INITIAL_JS_READY]);Arbiter.subscribe(OnloadEvent.ONBEFOREUNLOAD,function(b,a){a.warn=_runHooks('onbeforeleavehooks')||_runHooks('onbeforeunloadhooks');if(!a.warn){window.loaded=false;window.afterloaded=false;}},Arbiter.SUBSCRIBE_NEW);Arbiter.subscribe(OnloadEvent.ONUNLOAD,function(b,a){_runHooks('onunloadhooks');},Arbiter.SUBSCRIBE_NEW);
__e("string-extensions",["arbiter"],function(c,e,d,b){var a=e('arbiter');String.prototype.trim=function(){if(this==window)return null;return this.replace(/^\s*|\s*$/g,'');};b.trim=c.trim=function(g){try{return String(g.toString()).trim();}catch(f){return '';}};String.prototype.startsWith=function(f){if(this==window)return null;return this.substring(0,f.length)==f;};String.prototype.endsWith=function(f){if(this==window)return null;return this.length>=f.length&&this.substring(this.length-f.length)==f;};String.prototype.split=(function(f){return function(m,j){var g="";if(m===null||j===null){return [];}else if(typeof m=='string'){return f.call(this,m,j);}else if(m===undefined){return [this.toString()];}else if(m instanceof RegExp){if(!m._2||!m._1){g=m.toString().replace(/^[\S\s]+\//,"");if(!m._1)if(!m.global){m._1=new RegExp(m.source,"g"+g);}else m._1=1;}separator1=m._1===1?m:m._1;var n=(m._2?m._2:m._2=new RegExp("^"+separator1.source+"$",g));if(j===undefined||j<0){j=false;}else{j=Math.floor(j);if(!j)return [];}var k,l=[],i=0,h=0;while((j?h++<=j:true)&&(k=separator1.exec(this))){if((k[0].length===0)&&(separator1.lastIndex>k.index))separator1.lastIndex--;if(separator1.lastIndex>i){if(k.length>1)k[0].replace(n,function(){for(var o=1;o<arguments.length-2;o++)if(arguments[o]===undefined)k[o]=undefined;});l=l.concat(this.substring(i,k.index),(k.index===this.length?[]:k.slice(1)));i=separator1.lastIndex;}if(k[0].length===0)separator1.lastIndex++;}return (i===this.length)?(separator1.test("")?l:l.concat("")):(j?l:l.concat(this.substring(i)));}else return f.call(this,m,j);};})(String.prototype.split);a.inform('fbjs/prototypes');},3);
onloadRegister(function(){copy_properties(AsyncRequest.prototype,{setNectarModuleData:function(c){if(this.method=='POST'){var d=Env.module;if(c&&d===undefined){var b={fbpage_fan_confirm:1};var e=null;for(var a=c;a&&a!=document.body;a=a.parentNode){if(!a.id||typeof a.id!=='string')continue;if(a.id.startsWith('pagelet_')){d=a.id;break;}if(!e&&b[a.id])e=a.id;}if(d===undefined&&e)d=e;}if(d!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._mod=d;}}},setNectarImpressionId:function(){if(this.method=='POST'){var a=Env.impid;if(a!==undefined){if(this.data.nctr===undefined)this.data.nctr={};this.data.nctr._impid=a;}}}});});
__e("deferUntil",[],function(c,e,d,b){function a(h,g,l,f,m){var j=g();if(j){h(j);return null;}var k=Date.now();var i=setInterval(function(){j=g();if(!j){if(!l||(l<new Date()-k))return;m&&m();}clearInterval(i);h(j);},20,f);return i;}d.exports=a;});
__e("function-utils",["FunctionUtils","deferUntil"],function(b,c){var a=c('FunctionUtils');b.debounce=a.debounce;b.throttle=a.throttle;b.defer_until=c('deferUntil');},3);
var XD={_callbacks:[],_opts:{autoResize:false,allowShrink:true,channelUrl:null,hideOverflow:false,newResizeMethod:false,resizeTimeout:100,resizeWidth:false,expectResizeAck:false,resizeAckTimeout:6000},_lastResizeAckId:0,_resizeCount:0,_resizeTimestamp:0,init:function(a){this._opts=copy_properties(copy_properties({},this._opts),a);if(this._opts.autoResize)this._startResizeMonitor();Arbiter.subscribe('Connect.Unsafe.resize.ack',function(c,b){if(!b.id)b.id=this._resizeCount;if(b.id>this._lastResizeAckId)this._lastResizeAckId=b.id;}.bind(this));},send:function(b,a){a=a||this._opts.channelUrl;if(!a)return;if(a.substr(0,4)!='http')return;var i=a+'&'+URI.implodeQuery(b),e='f'+(Math.random()*(1<<30)).toString(16).replace('.',''),c=document.body.appendChild(document.createElement('div')),h=false;c.style.position='absolute';c.style.top='-10000px';c.style.width='1px';c.style.height='1px';XD._callbacks[e]=function(){if(h){(function(){c.parentNode.removeChild(c);}).defer(3000);delete XD._callbacks[e];}};if(ua.ie()){var f,d=document.createElement('div');f='<iframe onload="XD._callbacks.'+e+'()"></iframe>';d.innerHTML=f;d.firstChild.setAttribute('src',i);f=d.innerHTML;c.innerHTML='<iframe src="javascript:false"></iframe>';h=true;(function(){c.innerHTML=f;}).defer();}else{var g=document.createElement('iframe');g.onload=XD._callbacks[e];c.appendChild(g);h=true;g.src=i;}},_computeSize:function(){return {width:this._opts.resizeWidth?this._calcWidth(XD.forced_min_width):0,height:this._calcHeight(this._opts.newResizeMethod)};},_calcHeight:function(d){var a=document.body,b=document.documentElement,c=0;if(d){c=Math.max(Math.max(a.offsetHeight,a.scrollHeight)+a.offsetTop,Math.max(b.offsetHeight,b.scrollHeight)+b.offsetTop);}else{if(ua.ie()){c=Math.max(a.offsetHeight,a.scrollHeight)+a.offsetTop;}else c=b.offsetHeight+b.offsetTop;if(window.Dialog)c=Math.max(c,Dialog.max_bottom);}return c;},_calcWidth:function(g){var a=document.body,e=document.documentElement,h=0;if(a.offsetWidth<a.scrollWidth){h=a.scrollWidth+a.offsetLeft;}else{var d=a.childNodes;for(var f=0;f<d.length;f++){var b=d[f];var c=b.offsetWidth+b.offsetLeft;if(c>h)h=c;}}if(g)h=Math.max(h,g);if(e.clientLeft>0)h+=(e.clientLeft*2);if(e.clientTop>0)height+=(e.clientTop*2);return h;},_startResizeMonitor:function(){var b,a=document.documentElement;if(this._opts.hideOverflow){a.style.overflow='hidden';document.body.style.overflow='hidden';}setInterval((function(){var f=this._computeSize();var g=Date.now();var c=this._lastResizeAckId<this._resizeCount&&(g-this._resizeTimestamp)>this._opts.resizeAckTimeout;if(!b||(this._opts.expectResizeAck&&c)||(this._opts.allowShrink&&b.width!=f.width)||(!this._opts.allowShrink&&b.width<f.width)||(this._opts.allowShrink&&b.height!=f.height)||(!this._opts.allowShrink&&b.height<f.height)){b=f;this._resizeCount++;this._resizeTimestamp=g;var e={type:'resize',height:f.height,ackData:{id:this._resizeCount}};if(f.width&&f.width!=0)e.width=f.width;try{if(URI(document.referrer).isFacebookURI()&&window.parent!=window&&window.name&&window.parent.location&&window.parent.location.toString&&URI(window.parent.location).isFacebookURI()){var iframes=window.parent.document.getElementsByTagName('iframe');for(var i=0;i<iframes.length;i=i+1)if(iframes[i].name==window.name){if(this._opts.resizeWidth)iframes[i].style.width=e.width+'px';iframes[i].style.height=e.height+'px';}}this.send(e);}catch(d){this.send(e);}}}).bind(this),this._opts.resizeTimeout);}};var UnverifiedXD=copy_properties({},XD);
WindowComm={_callbacks:{},makeHandler:function(a,c){c=c||'opener';var b='f'+(Math.random()*(1<<30)).toString(16).replace('.','');WindowComm._callbacks[b]=a;return new URI('/connect/window_comm.php').setQueryData({_id:b,_relation:c}).getQualifiedURI().toString();},_recv:function(b){var a=new URI(b).getQueryData();WindowComm._callbacks[a._id](a);}};
__e("object-extensions",["ObjectUtils"],function(c,e,d,b){var a=e('ObjectUtils');c.are_equal=a.areEqual;c.coalesce=a.coalesce;c.count=a.countKeys;c.is_scalar=a.isScalar;c.keys=a.getKeys;c.merge=a.merge;c.object=a.object;c.values=a.getValues;Object.from=a.createFrom;},3);
__e("event-form-bubbling",[],function(b,d,c,a){b.Event=b.Event||function(){};Event.__inlineSubmit=function(f,event){var e=Event.__getHandler&&Event.__getHandler(f,'submit');return e?null:Event.__bubbleSubmit(f,event);};Event.__bubbleSubmit=function(e,event){if(document.documentElement.attachEvent){var f;while(f!==false&&(e=e.parentNode))f=e.onsubmit?e.onsubmit(event):Event.__fire&&Event.__fire(e,'submit',event);return f;}};},3);
__e("DataStore",[],function(i,k,j,h){var f={};var c={};var g=1;var b=1;function d(l){var m;if(typeof l=='string'){m='str_'+l;}else{m='elem_'+(l.__FB_TOKEN||(l.__FB_TOKEN=[g++]))[0];c[m]=l;}return f[m]||(f[m]={});}function e(l){if(!l.nodeName)return false;try{if(null!=l.offsetParent)return false;}catch(m){}if(document.documentElement.contains){return !document.documentElement.contains(l);}else return (document.documentElement.compareDocumentPosition(l)&b);}var a={set:function(n,m,o){var l=d(n);l[m]=o;return n;},get:function(p,o,n){var m=d(p),q=m[o];if(typeof q==='undefined'&&p.getAttribute){var l=p.getAttribute('data-'+o);q=(null===l)?undefined:l;}if((n!==undefined)&&(q===undefined))q=m[o]=n;return q;},remove:function(n,m){var l=d(n),o=l[m];delete l[m];return o;},cleanup:function(){var m,l;for(m in c){l=c[m];if(e(l)){delete f[m];delete c[m];}}}};j.exports=a;});
__e("event-extensions",["event-form-bubbling","DataStore","ObjectUtils","parent","copyProperties","userAction"],function(i,o,m,h){o('event-form-bubbling');var b=o('DataStore');var d=o('ObjectUtils');var e=o('parent');var g=o('copyProperties');var q=o('userAction');Event.DATASTORE_KEY='Event.listeners';if(!Event.prototype)Event.prototype={};function a(r){r=r||window.event||{};if(!r._inherits_from_prototype)for(var t in Event.prototype)try{r[t]=Event.prototype[t];}catch(s){}return r;}g(Event.prototype,{_inherits_from_prototype:true,stop:function(){this.cancelBubble=true;this.stopPropagation&&this.stopPropagation();return this;},prevent:function(){this.returnValue=false;this.preventDefault&&this.preventDefault();return this;},kill:function(){this.stop().prevent();return false;},getTarget:function(){var r=this.target||this.srcElement;return r?$(r):null;},getRelatedTarget:function(){var r=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return r?$(r):null;},getModifiers:function(){var r={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};r.access=ua.osx()?r.control:r.alt;r.any=r.control||r.shift||r.alt||r.meta;return r;}});g(Event,{listen:function(s,zb,u,y){if(typeof s=='string')s=$(s);if(typeof y=='undefined')y=Event.Priority.NORMAL;if(typeof zb=='object'){var t={};for(var za in zb)t[za]=Event.listen(s,za,zb[za],y);return t;}if(zb.match(/^on/i))throw new TypeError("Bad event name `"+event+"': use `click', not `onclick'.");if(s.nodeName=='LABEL'&&zb=='click'){var x=s.getElementsByTagName('input');s=x.length==1?x[0]:s;}var v=b.get(s,j,{});if(p[zb]){var r=p[zb];zb=r.base;u=r.wrap(u);}f(s,zb);var zc=v[zb];if(!(y in zc))zc[y]=[];var w=zc[y].length,z=new c(u,zc[y],w);zc[y].push(z);return z;},stop:function(r){return a(r).stop();},prevent:function(r){return a(r).prevent();},kill:function(r){return a(r).kill();},getKeyCode:function(event){event=a(event);if(!event)return false;switch(event.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34;}if(event.shiftKey)switch(event.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null;}return event.keyCode;},getPriorities:function(){if(!n){var r=d.getValues(Event.Priority);r.sort(function(s,t){return s-t;});n=r;}return n;},__fire:function(r,t,event){var s=Event.__getHandler(r,t);if(s)return s(a(event));},__getHandler:function(r,s){return b.get(r,Event.DATASTORE_KEY+s);}});var n=null,j=Event.DATASTORE_KEY;var k=function(r){return function(s){if(!DOM.contains(this,s.getRelatedTarget()))return r.call(this,s);};};var p={mouseenter:{base:'mouseover',wrap:k},mouseleave:{base:'mouseout',wrap:k}};var f=function(r,x){var s='on'+x;var v=l.bind(r);var u=b.get(r,j);if(x in u)return;u[x]={};if(r.addEventListener){r.addEventListener(x,v,false);}else if(r.attachEvent)r.attachEvent(s,v);b.set(r,j+x,v);if(r[s]){var w=r===document.documentElement?Event.Priority._BUBBLE:Event.Priority.TRADITIONAL;var t=r[s];r[s]=null;Event.listen(r,x,t,w);}if(r.nodeName==='FORM'&&x==='submit')Event.listen(r,x,Event.__bubbleSubmit.curry(r),Event.Priority._BUBBLE);};var l=function(event){event=a(event);var y=event.type;if(!b.get(this,j))throw new Error("Bad listenHandler context.");var z=b.get(this,j)[y];if(!z)throw new Error("No registered handlers for `"+y+"'.");if(y=='click'){var t=e.byTag(event.getTarget(),'a');var za=q('click',t,event).set_namespace('evt_ext');if(window.ArbiterMonitor)ArbiterMonitor.initUA(za,[t]);}var v=Event.getPriorities();for(var u=0;u<v.length;u++){var w=v[u];if(w in z){var r=z[w];for(var s=0;s<r.length;s++){if(!r[s])continue;var x=r[s].fire(this,event);if(x===false){return event.kill();}else if(event.cancelBubble)event.stop();}}}return event.returnValue;};Event.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1000};function c(s,r,t){this._handler=s;this._container=r;this._index=t;}c.prototype={remove:function(){delete this._handler;delete this._container[this._index];},fire:function(r,event){return this._handler.call(r,event);}};i.$E=h.$E=a;},3);
__e("vector",["event-extensions","copyProperties"],function(g,i,h,f){var a=i('event-extensions').$E;var c=i('copyProperties');function b(k,l,j){c(this,{x:parseFloat(k),y:parseFloat(l),domain:j||'pure'});}c(b.prototype,{toString:function(){return '('+this.x+', '+this.y+')';},add:function(l,m){if(arguments.length==1){if(l.domain!='pure')l=l.convertTo(this.domain);return this.add(l.x,l.y);}var j=parseFloat(l);var k=parseFloat(m);return new b(this.x+j,this.y+k,this.domain);},mul:function(j,k){if(typeof(k)=="undefined")k=j;return new b(this.x*j,this.y*k,this.domain);},sub:function(j,k){if(arguments.length==1){return this.add(j.mul(-1));}else return this.add(-j,-k);},distanceTo:function(j){return this.sub(j).magnitude();},magnitude:function(){return Math.sqrt((this.x*this.x)+(this.y*this.y));},convertTo:function(j){if(j!='pure'&&j!='viewport'&&j!='document')return new b(0,0);if(j==this.domain)return new b(this.x,this.y,this.domain);if(j=='pure')return new b(this.x,this.y);if(this.domain=='pure')return new b(0,0);var k=b.getScrollPosition('document');var l=this.x,m=this.y;if(this.domain=='document'){l-=k.x;m-=k.y;}else{l+=k.x;m+=k.y;}return new b(l,m,j);},setElementPosition:function(j){var k=this.convertTo('document');j.style.left=parseInt(k.x)+'px';j.style.top=parseInt(k.y)+'px';return this;},setElementDimensions:function(j){return this.setElementWidth(j).setElementHeight(j);},setElementWidth:function(j){j.style.width=parseInt(this.x,10)+'px';return this;},setElementHeight:function(j){j.style.height=parseInt(this.y,10)+'px';return this;},scrollElementBy:function(j){if(j==document.body){window.scrollBy(this.x,this.y);}else{j.scrollLeft+=this.x;j.scrollTop+=this.y;}return this;}});c(b,{getEventPosition:function(k,j){j=j||'document';k=a(k);var m=k.pageX||(k.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft));var n=k.pageY||(k.clientY+(document.documentElement.scrollTop||document.body.scrollTop));var l=new b(m,n,'document');return l.convertTo(j);},getScrollPosition:function(j){j=j||'document';var k=document.body.scrollLeft||document.documentElement.scrollLeft;var l=document.body.scrollTop||document.documentElement.scrollTop;return new b(k,l,'document').convertTo(j);},getElementPosition:function(l,k){k=k||'document';if(!l)return;if(!('getBoundingClientRect' in l))return new b(0,0,'document');var n=l.getBoundingClientRect(),j=document.documentElement,m=Math.round(n.left)-j.clientLeft,o=Math.round(n.top)-j.clientTop;return new b(m,o,'viewport').convertTo(k);},getElementDimensions:function(j){return new b(j.offsetWidth||0,j.offsetHeight||0);},getViewportDimensions:function(){var j=(window&&window.innerWidth)||(document&&document.documentElement&&document.documentElement.clientWidth)||(document&&document.body&&document.body.clientWidth)||0;var k=(window&&window.innerHeight)||(document&&document.documentElement&&document.documentElement.clientHeight)||(document&&document.body&&document.body.clientHeight)||0;return new b(j,k,'viewport');},getDocumentDimensions:function(){var j=(document&&document.documentElement&&document.documentElement.scrollWidth)||(document&&document.body&&document.body.scrollWidth)||0;var k=(document&&document.documentElement&&document.documentElement.scrollHeight)||(document&&document.body&&document.body.scrollHeight)||0;return new b(j,k,'document');},deserialize:function(k){var j=k.split(',');return new b(j[0],j[1]);}});function d(j){return b.getElementPosition(j,'document').x;}function e(j){return b.getElementPosition(j,'document').y;}g.elementY=e;g.elementX=d;g.Vector2=h.exports=b;},3);
var PopupResizer={_opts:{allowShrink:true,timeout:100},init:function(a){copy_properties(PopupResizer._opts,a);setInterval(PopupResizer._resizeCheck,PopupResizer._opts.timeout);},_resizeCheck:function(){var e=Vector2.getViewportDimensions(),a=PopupResizer._getDocumentSize(),c=a.y-e.y,d=a.x-e.x;if(d<0)d=0;if(!PopupResizer._opts.allowShrink&&c<0)c=0;if(c||d)try{if(window.console&&window.console.firebug)console.log('Resizing will not work in firefox with firebug enabled. '+'See https://bugzilla.mozilla.org/show_bug.cgi?id=691693');window.resizeBy(d,c);if(d)window.moveBy(d/-2,0);}catch(b){}},_getDocumentSize:function(){var a={x:ua.firefox()?document.documentElement.scrollWidth:document.body.scrollWidth,y:document.body.scrollHeight};if(a.x<=0||a.x>document.documentElement.scrollWidth)a.x=document.documentElement.scrollWidth;if(a.y<=0||a.y>document.documentElement.scrollHeight)a.y=document.documentElement.scrollHeight;if(window.Dialog&&Dialog.max_bottom&&Dialog.max_bottom>a.y)a.y=Dialog.max_bottom;return a;},open:function(i,b,j){var f=typeof window.screenX!='undefined'?window.screenX:window.screenLeft,g=typeof window.screenY!='undefined'?window.screenY:window.screenTop,e=typeof window.outerWidth!='undefined'?window.outerWidth:document.body.clientWidth,d=typeof window.outerHeight!='undefined'?window.outerHeight:(document.body.clientHeight-22),c=parseInt(f+((e-j)/2),10),h=parseInt(g+((d-b)/2.5),10),a=('width='+j+',height='+b+',left='+c+',top='+h);return window.open(i,'_blank',a);}};
ConnectLogin={init:function(a){this.appID=a.appID;this.addToProfile=a.addToProfile;this.oneClick=a.oneClick;this.channelUrl=a.channelUrl;XD.init(a);},login:function(a,c,b){if(this.oneClick&&!c){this._oneClick(a);}else this._openPopup(a,c,b);},logout:function(){XD.send({type:'logout'});},_oneClick:function(a){new AsyncRequest().setURI('/ajax/api/tos.php').setData({app_id:this.appID,grant_perm:1}).setHandler(function(b){ConnectLogin._refreshLoginStatus();a&&a();}).send();},_openPopup:function(c,e,d){d=d||{};var b=WindowComm.makeHandler(function(h){ConnectLogin._closePopup();if(ConnectLogin.appID)ConnectLogin._refreshLoginStatus();c&&c();}),a=WindowComm.makeHandler(function(h){ConnectLogin._closePopup();}),g=new URI('/login.php');g.setQueryData({api_key:this.appID,next:b,channel_url:a,cancel_url:a,req_perms:e,v:'1.0',fbconnect:1,add_to_profile:this.addToProfile,display:'popup'});g.addQueryData(d);var f=this._getSize(d);this._popup=PopupResizer.open(g.toString(),f.height,f.width);},_closePopup:function(){if(this._popup){this._popup.close();this._popup=null;}},_refreshLoginStatus:function(){if(this.channelUrl){XD.send({type:'refreshLoginStatus'});}else window.location.reload();},_getSize:function(a){if(a.social_plugin=='registration'){return {width:640,height:370};}else return {width:610,height:280};}};
__e("css",["dom","css-core","copyProperties"],function(e,g,f,d){var b=g('dom');var a=g('css-core');var c=g('copyProperties');c(a,{shown:function(h){return !a.hasClass(h,'hidden_elem');},toggle:function(h){a.conditionShow(h,!a.shown(h));},setClass:function(i,h){$(i).className=h||'';return i;},setStyle:function(h,i,j){switch(i){case 'opacity':h.style.opacity=j;h.style.filter=j!==''?'alpha(opacity='+j*100+')':'';break;case 'float':h.style.cssFloat=h.style.styleFloat=j;break;default:i=i.replace(/-(.)/g,function(k,l){return l.toUpperCase();});h.style[i]=j;}return h;},getStyle:function(i,k){i=$(i);k=k.replace(/-(.)/g,function(l,m){return m.toUpperCase();});function j(l){return l.replace(/([A-Z])/g,'-$1').toLowerCase();}if(window.getComputedStyle){var h=window.getComputedStyle(i,null);if(h)return h.getPropertyValue(j(k));}if(document.defaultView&&document.defaultView.getComputedStyle){var h=document.defaultView.getComputedStyle(i,null);if(h)return h.getPropertyValue(j(k));if(k=="display")return "none";}if(i.currentStyle)return i.currentStyle[k];return i.style&&i.style[k];},getStyleFloat:function(h,i){return parseFloat(a.getStyle(h,i),10);},getOpacity:function(h){h=$(h);var i=a.getStyle(h,'filter');var j=null;if(i&&(j=/(\d+(?:\.\d+)?)/.exec(i))){return parseFloat(j.pop())/100;}else if(i=a.getStyle(h,'opacity')){return parseFloat(i);}else return 1;},isFixed:function(h){while(h!==document.documentElement){if(a.getStyle(h,'position')==='fixed')return true;h=h.parentNode;}return false;},getScrollParent:function(h){while(h!==document.body){var i=a.getStyle(h,'overflow');if(i==='auto'||i==='scroll')return h;h=h.parentNode;}return window;}});f.exports=a;},3);
var PlatformOptInPopup=function(){};copy_properties(PlatformOptInPopup,{DIALOG_URL:'/connect/uiserver.php',DIALOG_WIDTH:420,DIALOG_HEIGHT:450,APP_ID:127760087237610,open:function(d,c,a){if(!d)d='generic';if(!c)c='opt.in';var b=new URI(PlatformOptInPopup.DIALOG_URL);b.addQueryData({social_plugin:d,method:c,display:'popup',secure:URI.getRequestURI().isSecure(),app_id:PlatformOptInPopup.APP_ID});if(a)b.addQueryData(a);return PopupResizer.open(b.toString(),PlatformOptInPopup.DIALOG_WIDTH,PlatformOptInPopup.DIALOG_HEIGHT);}});
__e("animation",["css"],function(d,f,e,c){var a=f('css');function b(g){if(g==undefined)return;if(d==this){return new b(g);}else{this.obj=g;this._reset_state();this.queue=[];this.last_attr=null;}}b.resolution=20;b.offset=0;b.prototype._reset_state=function(){this.state={attrs:{},duration:500};};b.prototype.stop=function(){this._reset_state();this.queue=[];return this;};b.prototype._build_container=function(){if(this.container_div){this._refresh_container();return;}if(this.obj.firstChild&&this.obj.firstChild.__animation_refs){this.container_div=this.obj.firstChild;this.container_div.__animation_refs++;this._refresh_container();return;}var h=document.createElement('div');h.style.padding='0px';h.style.margin='0px';h.style.border='0px';h.__animation_refs=1;var g=this.obj.childNodes;while(g.length)h.appendChild(g[0]);this.obj.appendChild(h);this._orig_overflow=this.obj.style.overflow;this.obj.style.overflow='hidden';this.container_div=h;this._refresh_container();};b.prototype._refresh_container=function(){this.container_div.style.height='auto';this.container_div.style.width='auto';this.container_div.style.height=this.container_div.offsetHeight+'px';this.container_div.style.width=this.container_div.offsetWidth+'px';};b.prototype._destroy_container=function(){if(!this.container_div)return;if(!--this.container_div.__animation_refs){var g=this.container_div.childNodes;while(g.length)this.obj.appendChild(g[0]);this.obj.removeChild(this.container_div);}this.container_div=null;this.obj.style.overflow=this._orig_overflow;};b.ATTR_TO=1;b.ATTR_BY=2;b.ATTR_FROM=3;b.prototype._attr=function(g,j,i){g=g.replace(/-[a-z]/gi,function(k){return k.substring(1).toUpperCase();});var h=false;switch(g){case 'background':this._attr('backgroundColor',j,i);return this;case 'margin':j=b.parse_group(j);this._attr('marginBottom',j[0],i);this._attr('marginLeft',j[1],i);this._attr('marginRight',j[2],i);this._attr('marginTop',j[3],i);return this;case 'padding':j=b.parse_group(j);this._attr('paddingBottom',j[0],i);this._attr('paddingLeft',j[1],i);this._attr('paddingRight',j[2],i);this._attr('paddingTop',j[3],i);return this;case 'backgroundColor':case 'borderColor':case 'color':j=b.parse_color(j);break;case 'opacity':j=parseFloat(j,10);break;case 'height':case 'width':if(j=='auto'){h=true;}else j=parseInt(j,10);break;case 'borderWidth':case 'lineHeight':case 'fontSize':case 'marginBottom':case 'marginLeft':case 'marginRight':case 'marginTop':case 'paddingBottom':case 'paddingLeft':case 'paddingRight':case 'paddingTop':case 'bottom':case 'left':case 'right':case 'top':case 'scrollTop':case 'scrollLeft':j=parseInt(j,10);break;default:throw new Error(g+' is not a supported attribute!');}if(this.state.attrs[g]===undefined)this.state.attrs[g]={};if(h)this.state.attrs[g].auto=true;switch(i){case b.ATTR_FROM:this.state.attrs[g].start=j;break;case b.ATTR_BY:this.state.attrs[g].by=true;case b.ATTR_TO:this.state.attrs[g].value=j;break;}};b._get_box_width=function(i){var j=parseInt(a.getStyle(i,'paddingLeft'),10),k=parseInt(a.getStyle(i,'paddingRight'),10),g=parseInt(a.getStyle(i,'borderLeftWidth'),10),h=parseInt(a.getStyle(i,'borderRightWidth'),10);return i.offsetWidth-(j?j:0)-(k?k:0)-(g?g:0)-(h?h:0);};b._get_box_height=function(i){var k=parseInt(a.getStyle(i,'paddingTop'),10),j=parseInt(a.getStyle(i,'paddingBottom'),10),g=parseInt(a.getStyle(i,'borderTopWidth'),10),h=parseInt(a.getStyle(i,'borderBottomWidth'),10);return i.offsetHeight-(k?k:0)-(j?j:0)-(g?g:0)-(h?h:0);};b.prototype.to=function(g,h){if(h===undefined){this._attr(this.last_attr,g,b.ATTR_TO);}else{this._attr(g,h,b.ATTR_TO);this.last_attr=g;}return this;};b.prototype.by=function(g,h){if(h===undefined){this._attr(this.last_attr,g,b.ATTR_BY);}else{this._attr(g,h,b.ATTR_BY);this.last_attr=g;}return this;};b.prototype.from=function(g,h){if(h===undefined){this._attr(this.last_attr,g,b.ATTR_FROM);}else{this._attr(g,h,b.ATTR_FROM);this.last_attr=g;}return this;};b.prototype.duration=function(g){this.state.duration=g?g:0;return this;};b.prototype.checkpoint=function(h,g){if(h===undefined)h=1;this.state.checkpoint=h;this.queue.push(this.state);this._reset_state();this.state.checkpointcb=g;return this;};b.prototype.blind=function(){this.state.blind=true;return this;};b.prototype.hide=function(){this.state.hide=true;return this;};b.prototype.show=function(){this.state.show=true;return this;};b.prototype.ease=function(g){this.state.ease=g;return this;};b.prototype.go=function(){var h=(new Date()).getTime();this.queue.push(this.state);for(var g=0;g<this.queue.length;g++){this.queue[g].start=h-b.offset;if(this.queue[g].checkpoint)h+=this.queue[g].checkpoint*this.queue[g].duration;}b.push(this);return this;};b.prototype._show=function(){a.show(this.obj);};b.prototype._hide=function(){a.hide(this.obj);};b.prototype._frame=function(s){var i=true;var r=false;var u=false;var t;function j(v){return document.documentElement[v]||document.body[v];}for(var k=0;k<this.queue.length;k++){var h=this.queue[k];if(h.start>s){i=false;continue;}if(h.checkpointcb){this._callback(h.checkpointcb,s-h.start);h.checkpointcb=null;}if(h.started===undefined){if(h.show)this._show();for(var g in h.attrs){if(h.attrs[g].start!==undefined)continue;switch(g){case 'backgroundColor':case 'borderColor':case 'color':t=b.parse_color(a.getStyle(this.obj,g=='borderColor'?'borderLeftColor':g));if(h.attrs[g].by){h.attrs[g].value[0]=Math.min(255,Math.max(0,h.attrs[g].value[0]+t[0]));h.attrs[g].value[1]=Math.min(255,Math.max(0,h.attrs[g].value[1]+t[1]));h.attrs[g].value[2]=Math.min(255,Math.max(0,h.attrs[g].value[2]+t[2]));}break;case 'opacity':t=a.getOpacity(this.obj);if(h.attrs[g].by)h.attrs[g].value=Math.min(1,Math.max(0,h.attrs[g].value+t));break;case 'height':t=b._get_box_height(this.obj);if(h.attrs[g].by)h.attrs[g].value+=t;break;case 'width':t=b._get_box_width(this.obj);if(h.attrs[g].by)h.attrs[g].value+=t;break;case 'scrollLeft':case 'scrollTop':t=(this.obj===document.body)?j(g):this.obj[g];if(h.attrs[g].by)h.attrs[g].value+=t;h['last'+g]=t;break;default:t=parseInt(a.getStyle(this.obj,g),10)||0;if(h.attrs[g].by)h.attrs[g].value+=t;break;}h.attrs[g].start=t;}if((h.attrs.height&&h.attrs.height.auto)||(h.attrs.width&&h.attrs.width.auto)){if(ua.firefox()<3)u=true;this._destroy_container();for(var g in {height:1,width:1,fontSize:1,borderLeftWidth:1,borderRightWidth:1,borderTopWidth:1,borderBottomWidth:1,paddingLeft:1,paddingRight:1,paddingTop:1,paddingBottom:1})if(h.attrs[g])this.obj.style[g]=h.attrs[g].value+(typeof h.attrs[g].value=='number'?'px':'');if(h.attrs.height&&h.attrs.height.auto)h.attrs.height.value=b._get_box_height(this.obj);if(h.attrs.width&&h.attrs.width.auto)h.attrs.width.value=b._get_box_width(this.obj);}h.started=true;if(h.blind)this._build_container();}var o=(s-h.start)/h.duration;if(o>=1){o=1;if(h.hide)this._hide();}else i=false;var q=h.ease?h.ease(o):o;if(!r&&o!=1&&h.blind)r=true;if(u&&this.obj.parentNode){var p=this.obj.parentNode;var n=this.obj.nextSibling;p.removeChild(this.obj);}for(var g in h.attrs)switch(g){case 'backgroundColor':case 'borderColor':case 'color':this.obj.style[g]='rgb('+b.calc_tween(q,h.attrs[g].start[0],h.attrs[g].value[0],true)+','+b.calc_tween(q,h.attrs[g].start[1],h.attrs[g].value[1],true)+','+b.calc_tween(q,h.attrs[g].start[2],h.attrs[g].value[2],true)+')';break;case 'opacity':a.setStyle(this.obj,'opacity',b.calc_tween(q,h.attrs[g].start,h.attrs[g].value));break;case 'height':case 'width':this.obj.style[g]=q==1&&h.attrs[g].auto?'auto':b.calc_tween(q,h.attrs[g].start,h.attrs[g].value,true)+'px';break;case 'scrollLeft':case 'scrollTop':var l=this.obj===document.body;t=l?j(g):this.obj[g];if(h['last'+g]!==t){delete h.attrs[g];}else{var m=b.calc_tween(q,h.attrs[g].start,h.attrs[g].value,true);if(!l){m=this.obj[g]=m;}else{if(g=='scrollLeft'){d.scrollTo(m,j('scrollTop'));}else d.scrollTo(j('scrollLeft'),m);m=j(g);}h['last'+g]=m;}break;default:this.obj.style[g]=b.calc_tween(q,h.attrs[g].start,h.attrs[g].value,true)+'px';break;}if(o==1){this.queue.splice(k--,1);this._callback(h.ondone,s-h.start-h.duration);}}if(u)p[n?'insertBefore':'appendChild'](this.obj,n);if(!r&&this.container_div)this._destroy_container();return !i;};b.prototype.ondone=function(g){this.state.ondone=g;return this;};b.prototype._callback=function(g,h){if(g){b.offset=h;g.call(this);b.offset=0;}};b.calc_tween=function(g,h,i,j){return (j?parseInt:parseFloat)((i-h)*g+h,10);};b.parse_color=function(g){var h=/^#([a-f0-9]{1,2})([a-f0-9]{1,2})([a-f0-9]{1,2})$/i.exec(g);if(h){return [parseInt(h[1].length==1?h[1]+h[1]:h[1],16),parseInt(h[2].length==1?h[2]+h[2]:h[2],16),parseInt(h[3].length==1?h[3]+h[3]:h[3],16)];}else{var i=/^rgba? *\(([0-9]+), *([0-9]+), *([0-9]+)(?:, *([0-9]+))?\)$/.exec(g);if(i){if(i[4]==='0'){return [255,255,255];}else return [parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)];}else if(g=='transparent'){return [255,255,255];}else throw 'Named color attributes are not supported.';}};b.parse_group=function(g){g=trim(g).split(/ +/);if(g.length==4){return g;}else if(g.length==3){return [g[0],g[1],g[2],g[1]];}else if(g.length==2){return [g[0],g[1],g[0],g[1]];}else return [g[0],g[0],g[0],g[0]];};b.push=function(g){if(!b.active)b.active=[];b.active.push(g);if(b.active.length===1){if(!b.requestAnimationFrame){var h=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame;if(h)b.requestAnimationFrame=h.bind(d);}if(b.requestAnimationFrame){b.requestAnimationFrame(b._animate);}else b.timeout=setInterval(b._animate,b.resolution,false);}if(b.requestAnimationFrame)b._updateEndingTimer();b._animate(Date.now(),true);};b._updateEndingTimer=function(){if(!b.requestAnimationFrame)throw new Error('Ending timer only valid with requestAnimationFrame');var j=0;for(var g=0;g<b.active.length;g++){var l=b.active[g];for(var k=0;k<l.queue.length;k++){var h=l.queue[k].start+l.queue[k].duration;if(h>j)j=h;}}if(b.timeout){clearTimeout(b.timeout);delete b.timeout;}var i=Date.now();if(j>i)b.timeout=setTimeout(b._animate.shield(),j-i,false);};b._animate=function(j,i){j=j||Date.now();for(var h=(i===true)?b.active.length-1:0;h<b.active.length;h++)try{if(!b.active[h]._frame(j))b.active.splice(h--,1);}catch(g){b.active.splice(h--,1);}if(b.active.length===0){if(b.timeout){if(b.requestAnimationFrame){clearTimeout(b.timeout);}else clearInterval(b.timeout);delete b.timeout;}}else if(b.requestAnimationFrame)b.requestAnimationFrame(b._animate);};b.ease={};b.ease.begin=function(g){return Math.sin(Math.PI/2*(g-1))+1;};b.ease.end=function(g){return Math.sin(.5*Math.PI*g);};b.ease.both=function(g){return .5*Math.sin(Math.PI*(g-.5))+.5;};b.prependInsert=function(h,g){b.insert(h,g,DOM.prependContent);};b.appendInsert=function(h,g){b.insert(h,g,DOM.appendContent);};b.insert=function(i,g,h){a.setStyle(g,'opacity',0);h(i,g);b(g).from('opacity',0).to('opacity',1).duration(400).go();};d.animation=e.exports=b;},3);
__e("array-utils",["ArrayUtils","hasArrayNature"],function(a,b){a.$A=b('ArrayUtils').createFrom;a.hasArrayNature=b('hasArrayNature');},3);
WidgetArbiter={_findSiblings:function(){if(WidgetArbiter._siblings)return;WidgetArbiter._siblings=[];for(var b=parent.frames.length-1;b>=0;b--)try{if(parent.frames[b]&&parent.frames[b].Arbiter&&parent.frames[b].Arbiter.inform)WidgetArbiter._siblings.push(parent.frames[b].Arbiter);}catch(a){}},inform:function(){WidgetArbiter._findSiblings();var a=$A(arguments);WidgetArbiter._siblings.each(function(b){b.inform.apply(b,a);});}};
function intl_locale_is_rtl(){return ('rtl'==CSS.getStyle(document.body,'direction'));}
__e("Button",["event-extensions","css","DataStore","dom","parent"],function(g,i,h,f){i('event-extensions');var b=i('css');var d=i('DataStore');var c=i('dom');var e=i('parent');var a=(function(){var k='uiButtonDisabled';var j='uiButtonDepressed';var m='button:blocker';var l='href';function n(s,r){var q=d.get(s,m);if(r){if(q){q.remove();d.remove(s,m);}}else if(!q)d.set(s,m,Event.listen(s,'click',bagof(false),Event.Priority.URGENT));}function o(q){var r=e.byClass(q,'uiButton');if(!r)throw new Error('invalid use case');return r;}function p(q){return c.isNodeOfType(q,'a');}return {getInputElement:function(q){q=o(q);if(p(q))throw new Error('invalid use case');return c.find(q,'input');},isEnabled:function(q){return !b.hasClass(o(q),k);},setEnabled:function(t,q){t=o(t);b.conditionClass(t,k,!q);if(p(t)){var r=t.href;var u=d.get(t,l,'#');if(q){if(!r)t.href=u;}else{if(r&&r!==u)d.set(t,l,r);t.removeAttribute('href');}n(t,q);}else{var s=a.getInputElement(t);s.disabled=!q;n(s,q);}},setDepressed:function(r,q){b.conditionClass(o(r),j,q);},isDepressed:function(q){return b.hasClass(o(q),j);},setLabel:function(r,q){r=o(r);if(p(r)){var s=c.find(r,'span.uiButtonText');c.setContent(s,q);}else a.getInputElement(r).value=q;b.conditionClass(r,'uiButtonNoText',!q);},setIcon:function(r,q){if(!c.isNode(q))return;b.addClass(q,'customimg');r=o(r);var s=c.scry(r,'.img')[0];if(s!=q)if(s){c.replace(s,q);}else c.prependContent(r,q);}};})();g.Button=h.exports=a;},3);
!function(){var b=document.documentElement;var a=function(c){c=c||window.event;var d=c.target||c.srcElement;var f=d.getAttribute('placeholder');if(f){var e=Parent.byClass(d,'focus_target');if('focus'==c.type||'focusin'==c.type){if(d.value==f&&CSS.hasClass(d,'DOMControl_placeholder')){d.value='';CSS.removeClass(d,'DOMControl_placeholder');}if(e){CSS.addClass(e,'child_is_active');CSS.addClass(e,'child_is_focused');CSS.addClass(e,'child_was_focused');Arbiter.inform('reflow');}}else{if(d.value==''){CSS.addClass(d,'DOMControl_placeholder');d.value=f;e&&CSS.removeClass(e,'child_is_active');d.style.direction='';}e&&CSS.removeClass(e,'child_is_focused');}}};if(b.addEventListener){b.addEventListener('focus',a,true);b.addEventListener('blur',a,true);}else b.onfocusin=b.onfocusout=a;}();
__e("control-dom",["DataStore","dom-core"],function(e,g,f,d){var c=g('DataStore');var a=g('dom-core').$;function b(h){this.root=a(h);this.updating=false;c.set(h,'DOMControl',this);}b.prototype={getRoot:function(){return this.root;},beginUpdate:function(){if(this.updating)return false;this.updating=true;return true;},endUpdate:function(){this.updating=false;},update:function(h){if(!this.beginUpdate())return this;this.onupdate(h);this.endUpdate();},onupdate:function(h){}};b.getInstance=function(h){return c.get(h,'DOMControl');};e.DOMControl=f.exports=b;},3);
__e("input-methods",["bootloader","css-core","dom","control-dom","object-core-utils"],function(g,i,h,f){var a=i('bootloader');var b=i('css-core');var c=i('dom');var d=i('control-dom');var e=function(j){var k=j.getAttribute('maxlength');if(k&&k>0)a.loadComponents('maxlength-form-listener',function(){Input.enforceMaxLength(j,k);});};h.exports={focus:function(j){try{j.focus();}catch(k){}},isEmpty:function(j){return !(/\S/).test(j.value||'')||b.hasClass(j,'DOMControl_placeholder');},getValue:function(j){return Input.isEmpty(j)?'':j.value;},setValue:function(k,l){b.removeClass(k,'DOMControl_placeholder');k.value=l||'';e(k);var j=d.getInstance(k);j&&j.resetHeight&&j.resetHeight();},setPlaceholder:function(j,k){j.setAttribute('title',k);j.setAttribute('placeholder',k);if(j==document.activeElement)return;if(Input.isEmpty(j)){b.conditionClass(j,'DOMControl_placeholder',k);j.value=k||'';}},reset:function(j){var k=j!==document.activeElement?(j.getAttribute('placeholder')||''):'';j.value=k;b.conditionClass(j,'DOMControl_placeholder',k);j.style.height='';},setSubmitOnEnter:function(j,k){b.conditionClass(j,'enter_submit',k);},getSubmitOnEnter:function(j){return b.hasClass(j,'enter_submit');},setMaxLength:function(j,k){if(k>0){j.setAttribute('maxlength',k);e(j);}else j.removeAttribute('maxlength');}};i('object-core-utils').add_properties('Input',h.exports);},3);
onloadRegister(function(){Event.listen(document.documentElement,'submit',function(b){var a=b.getTarget().getElementsByTagName('*');for(var c=0;c<a.length;c++)if(a[c].getAttribute('placeholder')&&Input.isEmpty(a[c]))Input.setValue(a[c],'');});});
var ExternalNodeConnectWidget=function(i){copy_properties(this,{widgetID:i.widgetID,widget:$(i.widgetID),viewerID:i.viewer,nodeType:i.nodeType,viewerIsAdmin:i.viewerIsAdmin&&!i.userOptedOut,adminUrl:i.adminUrl,popupOptInParams:{},nodeUri:new URI(i.nodeURL),externalUrl:i.externalURL,pageId:i.pageId,layout:i.layout,edgeType:i.edgeType,error:i.error,errorURI:new URI('/'),alreadyConnected:i.alreadyConnected,usingConnectLibrary:!!i.channelURL,commentWidgetMarkup:i.commentWidgetMarkup,commentWidgetOpen:false,commentWidgetVisible:false,userProfile:null,connectStoryFbid:0,isAmbiguousText:i.isAmbiguousText,socialBar:i.socialbar,useDisconnectLink:i.useDisconnectLink,showError:i.showError,showConfirm:i.showConfirm,showFaces:i.showFaces,connectText:i.connectText,ref:i.ref,userOptedOut:i.userOptedOut,usingInlineCommenting:i.usingInlineCommenting,mobile:i.mobile,supportCommenting:!i.mobile&&(!!i.channelURL||i.usingInlineCommenting),inlineCommentListenersInitialized:false,inlineCommentFocused:false,forceCommentHooks:i.forceCommentHooks,nux:i.nux,iframeReferer:i.iframeReferer,isBlocked:i.isBlocked,isPersonalized:i.isPersonalized,confirmedConnect:i.confirmedConnect,hasSend:i.send,colorScheme:i.colorScheme,grayOut:i.grayOut});if(this.usingConnectLibrary)UnverifiedXD.init({autoResize:i.autoResize,channelUrl:i.channelURL,resizeWidth:i.autoResize&&i.layout!==ExternalNodeConnectWidget.STANDARD_LAYOUT});this.connectButtonSlider=DOM.scry(this.widget,'div.connect_button_slider');this.connectButtonContainer=null;if(this.connectButtonSlider.length){this.connectButtonSlider=this.connectButtonSlider[0];this.connectButtonContainer=DOM.find(this.connectButtonSlider,'div.connect_button_container');}else this.connectButtonSlider=null;this.connectButton=DOM.find(this.widget,'a.connect_widget_like_button');if(this.grayOut)this.tombstoneCross=DOM.find(this.widget,'div.tombstone_cross');this.connectedMessage=DOM.scry(this.widget,'span.connect_widget_connected_text');this.connectedMessage=this.connectedMessage.length?this.connectedMessage[0]:null;this.notConnectedMessage=DOM.scry(this.widget,'span.connect_widget_not_connected_text');this.notConnectedMessage=this.notConnectedMessage.length?this.notConnectedMessage[0]:null;this.adminSpans=DOM.scry(this.widget,'span.connect_widget_admin_span');if(this.adminSpans.length>0){this.adminLinks=[];for(var a=0;a<this.adminSpans.length;a++)this.adminLinks[a]=DOM.find(this.adminSpans[a],'a.connect_widget_admin_option');}if(this.layout==ExternalNodeConnectWidget.STANDARD_LAYOUT){this.confirmationCell=DOM.find(this.widget,'div.connect_confirmation_cell');this.userActionTextSpan=DOM.find(this.confirmationCell,'span.connect_widget_user_action');this.summaryTextSpan=DOM.find(this.confirmationCell,'span.connect_widget_summary');this.summaryText=DOM.find(this.confirmationCell,'div.connect_widget_text_summary');var j=DOM.scry(this.widget,'div.connect_widget_sample_connections');this.sampleConnections=j.length>0?j[0]:null;if(i.showFaces&&i.viewer>0){var e=DOM.scry(this.widget,'div.connect_widget_logged_in_user');this.loggedInUserPhotoDiv=e.length>0?e[0]:null;}}if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT){this.originalButtonWidth=this.computeButtonDimensions().width;this.summaryIncluding=DOM.find(this.widget,'td.connect_widget_simple_including');this.supportCommenting=false;this.usingInlineCommenting=false;}this.setQueryData();if(this.pageId)copy_properties(this.popupOptInParams,{connect_id:this.pageId});this.errorSpans=DOM.scry(this.widget,'span.connect_widget_error_span');if(this.errorSpans.length>0){this.errorLinks=[];for(var b=0;b<this.errorSpans.length;b++)this.errorLinks[b]=DOM.find(this.errorSpans[b],'a.connect_widget_error_text');}this.confirmSpans=DOM.scry(this.widget,'span.connect_widget_confirm_span');if(this.confirmSpans.length>0){this.confirmLinks=[];for(var d=0;d<this.confirmSpans.length;d++)this.confirmLinks[d]=DOM.find(this.confirmSpans[d],'a.connect_widget_confirm_link');}this.unlikeSpans=DOM.scry(this.widget,'span.unlike_span');this.unlikeLinks=[];for(var c=0;c<this.unlikeSpans.length;c++){this.unlikeLinks[c]=DOM.find(this.unlikeSpans[c],'a.connect_widget_unlike_link');Event.listen(this.unlikeLinks[c],'click',this.connectToNodeOnClick.bind(this));}var h=DOM.scry(this.widget,'div.connect_widget_number_cloud');if(h.length==1){this.numberCloud=h[0];this.numberCloudNub=DOM.find(this.widget,'div.connect_widget_number_cloud_nub');this.numberCloudExtension=DOM.find(this.numberCloud,'div.connect_widget_number_cloud_extension');this.sizeNumberCloud();this.numberCloudUnlikeSpan=DOM.find(this.numberCloudExtension,'span.unlike_span');this.numberCloudReminderSpan=DOM.find(this.numberCloudExtension,'span.like_reminder');this.inAnimation=false;this.reminderIsVisible=CSS.hasClass(this.numberCloudUnlikeSpan,'hidden_elem');Event.listen(this.numberCloud,'mouseleave',this.restoreReminderSpan.bind(this));Event.listen(this.numberCloudExtension,'mouseleave',this.restoreReminderSpan.bind(this));Event.listen(this.numberCloudExtension,'mouseenter',this.exposeUnlikeSpan.bind(this));Event.listen(this.numberCloud,'mouseenter',this.exposeUnlikeSpan.bind(this));Event.listen(this.numberCloudExtension,'mouseleave',function(event){this.requiresMouseLeaveEvent=false;}.bind(this));}if(this.usingInlineCommenting&&!this.showFaces){this.shareCommentSpans=DOM.scry(this.widget,'span.connect_widget_share_comment_span');for(var f=0;f<this.shareCommentSpans.length;f++){var k=DOM.find(this.shareCommentSpans[f],'a.connect_widget_share_comment_option');Event.listen(k,'click',function(event){for(var l=0;l<this.shareCommentSpans.length;l++)CSS.addClass(this.shareCommentSpans[l],'hidden_elem');this.presentCommentingOption();}.bind(this));}}if(this.layout===ExternalNodeConnectWidget.BUTTON_COUNT_LAYOUT){XD.forced_min_width=this.getButtonCountWidgetWidth();this.numberExcluding=DOM.find(this.widget,'td.connect_widget_button_count_excluding');this.summaryIncluding=DOM.find(this.widget,'td.connect_widget_button_count_including');this.thumbsUpIcon=DOM.find(this.summaryIncluding,'div.thumbs_up');this.undoRegion=DOM.find(this.summaryIncluding,'div.undo');this.originalButtonWidth=this.computeButtonDimensions().width;Event.listen(this.thumbsUpIcon,'mouseenter',function(event){this.undoButton=DOM.find(this.undoRegion,'label.undo_button input');Event.listen(this.undoButton,'click',this.connectToNodeOnClick.bind(this));CSS.addClass(this.thumbsUpIcon,'hidden_elem');CSS.removeClass(this.undoRegion,'hidden_elem');}.bind(this));Event.listen(this.undoRegion,'mouseleave',function(event){CSS.removeClass(this.thumbsUpIcon,'hidden_elem');CSS.addClass(this.undoRegion,'hidden_elem');}.bind(this));}if(!this.isBlocked){Event.listen(this.connectButton,'click',this.primaryLikeButtonOnClick.bind(this));if(this.grayOut)Event.listen(this.tombstoneCross,'click',this.connectToNodeOnClick.bind(this));}if(this.adminLinks)for(var a=0;a<this.adminLinks.length;a++)Event.listen(this.adminLinks[a],'click',this.presentAdminPage.bind(this));if(this.errorLinks)for(var a=0;a<this.errorLinks.length;a++)Event.listen(this.errorLinks[a],'click',this.presentErrorDialog.bind(this));if(this.confirmLinks)for(var g=0;g<this.confirmLinks.length;g++)Event.listen(this.confirmLinks[g],'click',this.presentConfirmDialog.bind(this));if(i.showCaptcha){this.showCaptcha=true;this.connectToNode(true);}if(this.forceCommentHooks)this.setupCommentHooks($(this.forceCommentHooks));this.textInputMarginWithButton=5;this.widthSyncArbiter=Arbiter.subscribe('platform/socialplugins/send/resize',this.syncSendWidgetWidth.bind(this));Arbiter.inform('platform/socialplugins/like/resize',{button_width:this.computeButtonDimensionsWithPadding().width,widget_width:Vector2.getElementDimensions(this.widget).x,layout:this.layout},Arbiter.BEHAVIOR_STATE);Arbiter.subscribe('platform/socialplugins/dialog',function(m,l){if(l.controllerID!==this.widgetID)this.otherCommentWidgetOpen=(l.event=='open');}.bind(this));this.subscribeToSync(i);};copy_properties(ExternalNodeConnectWidget,{STANDARD_LAYOUT:'standard',BOX_COUNT_LAYOUT:'box_count',BUTTON_COUNT_LAYOUT:'button_count',SIMPLE_LAYOUT:'simple',COLOR_DARK:0,COLOR_LIGHT:1,OPT_IN_FACEBOOK_APP_ID:'127760087237610',updateLoggedInUser:function(b){var a=ExternalNodeConnectWidget.controllerManagingLogin;a.setLoggedIn(b);a.connectToNode(true);a.userOptedOut=false;delete ExternalNodeConnectWidget.controllerManagingLogin;Arbiter.inform('platform/socialplugins/login',{user:b.user},Arbiter.BEHAVIOR_STATE);WidgetArbiter.inform('platform/socialplugins/login',{user:b.user},Arbiter.BEHAVIOR_STATE);},onCommentWidgetLoaded:function(a){var b=ExternalNodeConnectWidget.self;delete ExternalNodeConnectWidget.self;b.injectCommentWidgetMarkup(a);}});copy_properties(ExternalNodeConnectWidget.prototype,{getSyncEndpointName:function(){},getConnectionEndpointName:function(){},getPluginName:function(){},subscribeToSync:function(a){Arbiter.subscribe('platform/socialplugins/login',function(c,b){if(this.viewerID&&b.user!==this.viewerID)document.location.reload();}.bind(this));Arbiter.subscribe(this.getSyncEndpointName(),function(c,b){if(b.externalUrl==a.externalURL){this.userOptedOut=false;this.updateWidget(b.opts,true);}}.bind(this));},setQueryData:function(){copy_properties(this.popupOptInParams,{protocol:window.location.protocol,external_page_url:this.externalUrl});if(this.nux)copy_properties(this.popupOptInParams,{nux:this.nux,referer:this.iframeReferer});},updateWidget:function(e,d,b){var a=(this.alreadyConnected!=e.nowConnected)||(this.showConfirm!=e.showConfirm);if(!d)Arbiter.inform(this.getConnectionEndpointName(),e,Arbiter.BEHAVIOR_STATE);this.alreadyConnected=e.nowConnected;this.viewerIsAdmin=e.isAdmin;this.showError=e.showError;this.showConfirm=e.showConfirm;this.adminUrl=e.adminUrl;this.userProfile=e.userProfile;this.connectStoryFbid=e.connectStoryFbid;this.error=e.error;if(!e.nowConnected)this.closeCommentWidget();if(a&&!d||b){var c=e.nowConnected?'edgeCreated':'edgeRemoved';UnverifiedXD.send({type:c});}if(a||this.error)this.syncWidgetDisplay();if(!d||b)WidgetArbiter.inform(this.getSyncEndpointName(),{externalUrl:this.externalUrl,opts:e},Arbiter.BEHAVIOR_STATE);},presentOptIn:function(){ExternalNodeConnectWidget.controllerManagingLogin=this;PlatformOptInPopup.open(this.getPluginName(),'opt.inlike',this.popupOptInParams);UnverifiedXD.send({type:'authPrompted'});},setLoggedIn:function(a){this.viewerID=a.user;this.newProfilePic=a.profilePic;this.placeFormUserCheck(a.formUserCheck,a.fbDtsg);},placeFormUserCheck:function(b,a){window.Env.fb_dtsg=a;if(ge('post_form_id')){DOM.replace($('post_form_id'),HTML(b));}else DOM.appendContent(DOM.find(document,'body'),HTML(b));},syncWidgetWithServer:function(c){var b=c.getPayload();if(b.requires_login){this.updateWidget({nowConnected:false,isAdmin:false},false);this.presentOptIn();return;}var a={nowConnected:b.success&&b.already_connected,isAdmin:b.is_admin,showError:b.show_error,showConfirm:b.show_confirm,adminUrl:b.admin_url,userProfile:b.user_profile,connectStoryFbid:b.story_fbid,error:b.error_info};this.updateWidget(a,!b.success,b.success);if(b.success&&this.showCaptcha){window.opener.location.reload();window.close();}},getButtonCountWidgetWidth:function(){var a=DOM.find(this.widget,'table.connect_widget_interactive_area');var b=CSS.getStyle(a,'width');return parseInt(b,10);},sizeNumberCloud:function(){this.collapsedNumberCloudHeight=this.getCollapsedNumberCloudHeight();this.expandedNumberCloudHeight=this.collapsedNumberCloudHeight+this.getNumberCloudExtensionHeight();if(this.alreadyConnected)CSS.setStyle(this.numberCloud,'height',this.expandedNumberCloudHeight+'px');var a=this.computeButtonDimensionsWithPadding().width;XD.forced_min_width=a;var b=intl_locale_is_rtl();a-=2;CSS.setStyle(this.numberCloud,'width',a+'px');CSS.setStyle(this.numberCloud,'visibility','visible');animation(this.numberCloud).from('opacity',0).to('opacity',1).duration(100).go();},getCollapsedNumberCloudHeight:function(){var b=Vector2.getElementDimensions(this.numberCloud).y;var d=parseInt(CSS.getStyle(this.numberCloud,'paddingTop'),10);var c=parseInt(CSS.getStyle(this.numberCloud,'paddingBottom'),10);var a=parseInt(CSS.getStyle(this.numberCloud,'border'),10);return b-d-c-2;},getNumberCloudExtensionHeight:function(){CSS.addClass(this.numberCloudExtension,'connect_widget_offscreen');if(!this.alreadyConnected)CSS.removeClass(this.numberCloudExtension,'hidden_elem');var a=Vector2.getElementDimensions(this.numberCloudExtension).y;if(!this.alreadyConnected)CSS.addClass(this.numberCloudExtension,'hidden_elem');CSS.removeClass(this.numberCloudExtension,'connect_widget_offscreen');return a;},restoreReminderSpan:function(event){if(this.reminderIsVisible||this.inAnimation)return;this.animateReminderSpanReappearance();},animateReminderSpanReappearance:function(){if(this.reminderIsVisible||this.inAnimation)return;this.inAnimation=true;CSS.addClass(this.numberCloudUnlikeSpan,'hidden_elem');CSS.setStyle(this.numberCloudReminderSpan,'opacity',0);CSS.removeClass(this.numberCloudReminderSpan,'hidden_elem');animation(this.numberCloudReminderSpan).to('opacity',1).duration(100).ondone(function(){this.inAnimation=false;this.reminderIsVisible=true;}.bind(this)).go();},exposeUnlikeSpan:function(event){if(!this.alreadyConnected||this.requiresMouseLeaveEvent||!this.reminderIsVisible||this.inAnimation)return;this.inAnimation=true;CSS.addClass(this.numberCloudReminderSpan,'hidden_elem');CSS.setStyle(this.numberCloudUnlikeSpan,'opacity',0);CSS.removeClass(this.numberCloudUnlikeSpan,'hidden_elem');animation(this.numberCloudUnlikeSpan).to('opacity',1).duration(100).ondone(function(){this.inAnimation=false;this.reminderIsVisible=false;}.bind(this)).go();},conditionallyActivateButton:function(event){this.commentButtonIsActive=this.inlineCommentInput.value.trim().length>0;},updateConnectionWithComment:function(event){Event.kill(event);if(this.commentButtonIsActive){this.postInlineComment();this.resetInlineComment();this.closeInlineComment();}},postInlineComment:function(){this.postUserComment(this.inlineCommentInput.value.trim(),false,'iframe');},resetInlineComment:function(){this.concealCommentButton();var a=this.inlineCommentInput.getAttribute('placeholder');this.inlineCommentInput.value=a;},showInlineComment:function(event){Event.kill(event);if(!this.inlineCommentFlyoutOpen||this.inlineCommentFlyoutVisible||this.showConfirm||this.error)return;this.inlineCommentFlyoutVisible=true;CSS.show(this.inlineCommentFlyout);},hideInlineComment:function(event){if(event)Event.kill(event);if(this.inlineCommentFocused||!this.inlineCommentFlyoutOpen||!this.inlineCommentFlyoutVisible)return;if(event&&DOM.contains(this.inlineCommentFlyout,event.getRelatedTarget()))return;var b=this.inlineCommentInput.value.trim();var a=this.inlineCommentInput.getAttribute('placeholder');if(b.length>0&&b!=a)return;this.inlineCommentFlyoutVisible=false;CSS.hide(this.inlineCommentFlyout);},closeInlineComment:function(){this.inlineCommentFlyoutVisible=false;this.inlineCommentFlyoutOpen=false;CSS.hide(this.inlineCommentFlyout);this.resetInlineComment();},concealCommentButton:function(){CSS.addClass(this.inlineCommentButton,'hidden_elem');CSS.setStyle(this.inlineCommentInput,'width',this.textInputWidthWithoutButton+'px');CSS.setStyle(this.inlineCommentInput,'margin-right',0);},positionInlineCommentFlyout:function(){CSS.addClass(this.inlineCommentFlyout,'comment_widget_offscreen');CSS.removeClass(this.inlineCommentFlyout,'hidden_elem');var b=0;var a=this.computeButtonDimensions();var e=a.height;var d=this.grayOut?b:b+20;var g=intl_locale_is_rtl()?'right':'left';if(this.showFaces){var k=DOM.scry(this.widget,'span.connect_widget_text')[0];var h=intl_locale_is_rtl()?'paddingRight':'paddingLeft';var l=CSS.getStyle(k,h);d=this.grayOut?b:b+parseInt(l,10);var i=Vector2.getElementDimensions(this.sampleConnections).y;e=i-3;}var j=Vector2.getElementDimensions(this.summaryText).y;if(j>15)e+=2;CSS.setStyle(this.inlineCommentFlyout,g,d+'px');CSS.setStyle(this.inlineCommentFlyout,'top',(-e)+'px');var n=Vector2.getElementPosition(this.widget,'document').x;var m=Vector2.getElementDimensions(this.widget).x;var o=n+m-d-5;CSS.setStyle(this.inlineCommentFlyout,'width',o+'px');CSS.removeClass(this.inlineCommentButton,'hidden_elem');var f=Vector2.getElementDimensions(this.inlineCommentButton).x;CSS.addClass(this.inlineCommentButton,'hidden_elem');var c=(this.inlineCommentClose)?15:0;this.textInputWidthWithoutButton=o-24-c;this.textInputWidthWithButton=this.textInputWidthWithoutButton-f-this.textInputMarginWithButton-1;CSS.setStyle(this.inlineCommentInput,'width',this.textInputWidthWithoutButton+'px');CSS.setStyle(this.inlineCommentInput,'margin-right',0);CSS.removeClass(this.inlineCommentFlyout,'comment_widget_offscreen');CSS.addClass(this.inlineCommentFlyout,'hidden_elem');},postUserComment:function(a,c,d){var b={href:this.externalUrl,node_type:this.nodeType,edge_type:this.edgeType,page_id:this.pageId,connect_text:this.connectText,story_fbid:this.connectStoryFbid,comment:a,widget_type:d||'xfbml',own_product:c};new AsyncRequest().setURI(this.getCommentAjaxEndpoint()).setData(b).setNectarModuleDataSafe().setNectarImpressionIdSafe().send();this.closeCommentWidget();},closeCommentWidget:function(){if(this.commentWidgetOpen){delete this.inGracePeriod;delete this.commentWidgetIsExpanded;this.commentWidgetVisible=false;this.commentWidgetOpen=false;UnverifiedXD.send({type:'dismissEdgeCommentDialog'});}},presentAdminPage:function(){var a='_blank';window.open(this.adminUrl.toString(),a);},presentErrorDialog:function(){if(!this.error.errorUri)return;var b='_blank';var a='toolbar=0, status=0, width=960, height=300';window.open(this.error.errorUri.toString(),b,a);},presentConfirmDialog:function(){var b='_blank';var a='toolbar=0,status=0,width=450,height=200,scrollbars=0,location=0,menubar=0';if(!window.confirmDialogReturn)window.confirmDialogReturn={};window.confirmDialogReturn[this.widgetID]=this;var c=this.getConfirmURL();window.open(c,b,a);},returnFromConfirmDialog:function(a){if(a){this.showConfirm=null;this.confirmedConnect=a;this.connectToNode(!this.alreadyConnected);}else this.updateWidget({nowConnected:this.alreadyConnected,showConfirm:null,isAdmin:this.viewerIsAdmin},false);},syncWidgetDisplay:function(){var a=this.alreadyConnected;this.setButtonState(a);this.showElementIf(this.connectedMessage,a);this.showElementIf(this.notConnectedMessage,!a);if(this.adminSpans)for(var b=0;b<this.adminSpans.length;b++)this.showElementIf(this.adminSpans[b],this.viewerIsAdmin);if(this.errorSpans)for(var c=0;c<this.errorSpans.length;c++)this.showElementIf(this.errorSpans[c],this.error&&(this.viewerIsAdmin||this.showError));for(var f=0;f<this.confirmSpans.length;f++)this.showElementIf(this.confirmSpans[f],!this.alreadyConnected&&this.showConfirm);for(var d=0;d<this.unlikeSpans.length;d++)this.showElementIf(this.unlikeSpans[d],this.alreadyConnected);if(this.shareCommentSpans)for(var e=0;e<this.shareCommentSpans.length;e++)this.showElementIf(this.shareCommentSpans[e],a);this.showElementIf(this.connectButton,(!this.useDisconnectLink||!a)&&!this.showConfirm);if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT){this.manageBoxCountButtonAnimation(a);}else if(this.layout===ExternalNodeConnectWidget.BUTTON_COUNT_LAYOUT){this.manageButtonCountButtonAnimation(a);}else if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT){this.manageSimpleButtonAnimation(a);}else this.manageStandardButtonAnimation(a);if(!this.loggedInUserPhotoDiv)return;if(a){this.slideUserPhotoIn(this.loggedInUserPhotoDiv);}else this.slideUserPhotoOut(this.loggedInUserPhotoDiv);},manageStandardButtonAnimation:function(a){if(this.grayOut)return;if(this.alreadyConnected||this.showConfirm){this.hideButton(true);}else this.hideButton(false);},setButtonState:function(a){if(a){CSS.removeClass(this.connectButton,'like_button_no_like');CSS.addClass(this.connectButton,'like_button_like');this.fixIEButtonDoubleLineBug();}else{CSS.addClass(this.connectButton,'like_button_no_like');CSS.removeClass(this.connectButton,'like_button_like');}},fixIEButtonDoubleLineBug:function(){if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT&&ua.ie()<=7&&!this.hasBeenFixed){var a=this.computeButtonDimensionsWithPadding();CSS.setStyle(this.connectButton,'width',a.width+1);this.hasBeenFixed=true;}},hideButton:function(a){if(this.layout!=='standard')return;if(this.oAnimateBlind)this.oAnimateBlind.stop();this.oAnimateBlind=animation(this.connectButtonSlider).duration(150);var c=1,b=intl_locale_is_rtl(),d=b?'marginRight':'marginLeft',e=b?'marginLeft':'marginRight';if(a){CSS.addClass(this.connectButtonContainer,'hidden');this.oAnimateBlind.ondone(function(){CSS.setStyle(this.connectButtonContainer,d,'2px');CSS.setStyle(this.connectButtonContainer,'visibility','hidden');CSS.addClass(this.confirmationCell,'connect_confirmation_cell_like');CSS.removeClass(this.confirmationCell,'connect_confirmation_cell_no_like');this.oAnimateBlind=null;}.bind(this));}else{CSS.setStyle(this.connectButtonContainer,d,'0px');c=Vector2.getElementDimensions(this.connectButton).x;this.oAnimateBlind.ondone(function(){CSS.setStyle(this.connectButtonSlider,'overflow','visible');CSS.setStyle(this.connectButtonSlider,'width','auto');CSS.removeClass(this.confirmationCell,'connect_confirmation_cell_like');CSS.addClass(this.confirmationCell,'connect_confirmation_cell_no_like');CSS.setStyle(this.connectButtonContainer,'visibility','visible');CSS.removeClass(this.connectButtonContainer,'hidden');this.oAnimateBlind=null;}.bind(this));}this.oAnimateBlind.to('width',c).blind().go();},showElementIf:function(a,b){if(!a)return;if(b){CSS.show(a);}else CSS.hide(a);},slideUserPhotoIn:function(b){if(!CSS.hasClass(b,'connect_widget_user_not_connected'))return;var a=CSS.getStyle(b,'width');CSS.setStyle(b,'width',0);CSS.setStyle(b,'opacity',0);CSS.removeClass(b,'connect_widget_user_not_connected');animation(b).to('width',a).duration(100).checkpoint().to('opacity',1).duration(400).go();},slideUserPhotoOut:function(a){if(CSS.hasClass(a,'connect_widget_user_not_connected'))return;animation(a).to('opacity',0).duration(100).checkpoint(.25).to('width',0).duration(100).ondone(function(){CSS.addClass(a,'connect_widget_user_not_connected');CSS.setStyle(a,'width',null);}).go();},primaryLikeButtonOnClick:function(event){if(this.grayOut&&this.alreadyConnected&&!this.mobile)return;this.connectToNodeOnClick(event);if(this.tombstoneCross&&this.alreadyConnected)DOM.replace(this.tombstoneCross,HTML('<div class="tombstone_cross tombstone_cross_static" />'));setTimeout(function(){this.tombstoneCross=DOM.find(this.widget,'div.tombstone_cross');CSS.removeClass(this.tombstoneCross,'tombstone_cross_static');Event.listen(this.tombstoneCross,'click',this.connectToNodeOnClick.bind(this));}.bind(this),1000);},_clickLocked:false,connectToNodeOnClick:function(event){Event.kill(event);if(!this._clickLocked){this._clickLocked=true;setTimeout(function(){this._clickLocked=false;}.bind(this),1000);if(this.viewerID==0||this.userOptedOut){this.presentOptIn();}else this.connectToNode(!this.alreadyConnected);}},connectToNode:function(d){if(!d){if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT)return;if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT&&!this.usingConnectLibrary){CSS.addClass(this.userActionTextSpan,'hidden_elem');CSS.removeClass(this.summaryTextSpan,'hidden_elem');CSS.setStyle(this.summaryTextSpan,'opacity',1);}if(this.shareCommentSpans)for(var b=0;b<this.shareCommentSpans.length;b++)CSS.addClass(this.shareCommentSpans[b],'hidden_elem');if(this.commentWidgetOpen){this.closeCommentWidget();}else if(this.inlineCommentFlyoutOpen)this.closeInlineComment();}this.updateWidget({nowConnected:!this.alreadyConnected,isAdmin:this.viewerIsAdmin},true);var a={href:this.externalUrl,node_type:this.nodeType,edge_type:this.edgeType,page_id:this.pageId,layout:this.layout,is_personalized:this.isPersonalized,show_captcha:this.showCaptcha,connect_text:this.connectText,ref:this.ref,now_connected:d,post_form_id:$('post_form_id').value,iframe_referer:this.iframeReferer};if(this.confirmedConnect)a.confirm=1;new AsyncRequest().setURI(this.getAjaxEndpoint()).setHandler(this.syncWidgetWithServer.bind(this)).setData(a).setNectarModuleDataSafe().setNectarImpressionIdSafe().send();if(d){if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT)this.requiresMouseLeaveEvent=true;if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT&&!this.usingConnectLibrary){CSS.setStyle(this.userActionTextSpan,'opacity',1);CSS.removeClass(this.userActionTextSpan,'hidden_elem');CSS.addClass(this.summaryTextSpan,'hidden_elem');Event.listen(this.widget,'mouseleave',this.transitionBetweenMessages.bind(this));}if(this.shareCommentSpans){for(var c=0;c<this.shareCommentSpans;c++)CSS.removeClass(this.shareCommentSpans[c],'hidden_elem');}else if(this.supportCommenting)this.presentCommentingOption();this.repositionFacepileVertically();}},transitionBetweenMessages:function(event){if(!this.alreadyConnected||CSS.hasClass(this.userActionTextSpan,'hidden_elem'))return;animation(this.userActionTextSpan).to('opacity',0).duration(500).ondone(function(){CSS.addClass(this.userActionTextSpan,'hidden_elem');CSS.setStyle(this.summaryTextSpan,'opacity',0);CSS.removeClass(this.summaryTextSpan,'hidden_elem');animation(this.summaryTextSpan).to('opacity',1).duration(500).ondone(function(){this.repositionFacepileVertically();}.bind(this)).go();this.positionInlineCommentFlyout();}.bind(this)).go();},presentCommentingOption:function(){Arbiter.inform('platform/socialplugins/dialog',{controllerID:this.widgetID,event:'open'});if(this.usingConnectLibrary){ExternalNodeConnectWidget.self=this;var a={type:'presentEdgeCommentDialog',masterFrameName:window.name,version:2};if(this.layout==ExternalNodeConnectWidget.BOX_COUNT_LAYOUT){a.preComputedWidthOffset=this.computeButtonDimensionsWithPadding().width;if(!intl_locale_is_rtl())a.preComputedWidthOffset+=8;}if(this.socialBar){a.left=parseInt(CSS.getStyle(document.getElementById('profile'),'width'),10)+1;}else if(this.hasSend&&this.layout==ExternalNodeConnectWidget.STANDARD_LAYOUT)a.preComputedWidthOffset=this.invertedButtons?0:65;UnverifiedXD.send(a);this.commentWidgetOpen=true;this.commentWidgetVisible=true;this.commentWidgetExpanded=true;}else if(this.usingInlineCommenting)if(!this.inlineCommentListenersInitialized){this.unwrapComment();this.initializeInlineCommentListeners();this.openInlineCommentFlyout();this.positionInlineCommentFlyout();this.inlineCommentListenersInitialized=true;}else{this.positionInlineCommentFlyout();this.openInlineCommentFlyout();}},unwrapComment:function(){if(this.unwrapComment.done)return;var b=$('connect-widget-comment-box-markup'),a=ExternalNodeConnectWidget.commentMarkup;b.innerHTML=a;this.unwrapComment.done=true;},initializeInlineCommentListeners:function(){this.inlineCommentFlyout=DOM.find(this.widget,'.connect_widget_comment_box');this.inlineCommentInput=DOM.find(this.inlineCommentFlyout,'.connect_widget_comment_textinput');this.inlineCommentButton=DOM.find(this.inlineCommentFlyout,'.connect_widget_comment_button');this.inlineCommentClose=DOM.scry(this.inlineCommentFlyout,'.connect_widget_comment_close_button');if(this.inlineCommentClose.length>0)this.inlineCommentClose=this.inlineCommentClose[0];this.commentButtonIsActive=false;Event.listen(this.inlineCommentInput,'keyup',this.conditionallyActivateButton.bind(this));Event.listen(this.inlineCommentInput,'focus',function(){this.inlineCommentFocused=true;this.exposeCommentButton();}.bind(this));Event.listen(this.inlineCommentButton,'click',this.updateConnectionWithComment.bind(this));Event.listen(this.inlineCommentInput,'blur',function(){this.inlineCommentFocused=false;this.hideInlineComment();}.bind(this));Event.listen(this.widget,'mouseout',this.hideInlineComment.bind(this));Event.listen(this.widget,'mouseover',this.showInlineComment.bind(this));if(this.inlineCommentClose)Event.listen(this.inlineCommentClose,'click',function(event){for(var a=0;a<this.shareCommentSpans.length;a++)CSS.removeClass(this.shareCommentSpans[a],'hidden_elem');this.closeInlineComment();}.bind(this));},exposeCommentButton:function(event){if(!CSS.hasClass(this.inlineCommentButton,'hidden_elem'))return;CSS.removeClass(this.inlineCommentButton,'hidden_elem');CSS.setStyle(this.inlineCommentInput,'width',this.textInputWidthWithButton+'px');CSS.setStyle(this.inlineCommentInput,'margin-right',this.textInputMarginWithButton+'px');},openInlineCommentFlyout:function(){CSS.show(this.inlineCommentFlyout);this.inlineCommentFlyoutOpen=true;this.inlineCommentFlyoutVisible=true;},manageBoxCountButtonAnimation:function(a){if(a&&!this.showConfirm){this.animateBoxCountButtonDisappearance();}else this.animateBoxCountButtonReappearance();},animateBoxCountButtonDisappearance:function(){if(this.grayOut)return;CSS.addClass(this.connectButton,'hidden_elem');CSS.setStyle(this.numberCloudExtension,'opacity',0);CSS.removeClass(this.numberCloudExtension,'hidden_elem');CSS.addClass(this.numberCloudNub,'hidden_elem');CSS.addClass(this.numberCloudUnlikeSpan,'hidden_elem');CSS.removeClass(this.numberCloudReminderSpan,'hidden_elem');animation(this.numberCloud).to('height',this.expandedNumberCloudHeight).duration(100).ondone(function(){animation(this.numberCloudExtension).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).go();},animateBoxCountButtonReappearance:function(){CSS.addClass(this.numberCloudExtension,'hidden_elem');animation(this.numberCloud).to('height',this.collapsedNumberCloudHeight).duration(75).ondone(function(){if(this.showConfirm){for(var a=0;a<this.confirmSpans.length;a++)CSS.removeClass(this.confirmSpans[a],'hidden_elem');}else{CSS.setStyle(this.connectButton,'opacity',0);CSS.removeClass(this.connectButton,'hidden_elem');animation(this.connectButton).from('opacity',0).to('opacity',1).duration(75).ondone(function(){CSS.setStyle(this.numberCloudNub,'opacity',0);CSS.removeClass(this.numberCloudNub,'hidden_elem');animation(this.numberCloudNub).from('opacity',0).to('opacity',1).duration(50).go();}.bind(this)).go();}}.bind(this)).go();},manageButtonCountButtonAnimation:function(a){if(a&&!this.showConfirm){this.animateButtonCountButtonDisappearance();}else this.animateButtonCountButtonReappearance();if(!this.grayOut){CSS.removeClass(this.thumbsUpIcon,'hidden_elem');CSS.addClass(this.undoRegion,'hidden_elem');}},manageSimpleButtonAnimation:function(a){if(this.grayOut)return;if(a&&!this.showConfirm){this.animateSimpleButtonDisappearance();}else this.animateSimpleButtonReappearance();},animateButtonCountButtonDisappearance:function(){if(!this.grayOut)animation(this.connectButton).from('opacity',1).to('opacity',0).from('width',this.originalButtonWidth).to('width','0px').ondone(function(){CSS.addClass(this.connectButton,'hidden_elem');}.bind(this)).duration(100).go();animation(this.numberExcluding).from('opacity',1).to('opacity',0).duration(100).ondone(function(){CSS.addClass(this.numberExcluding,'hidden_elem');CSS.setStyle(this.summaryIncluding,'opacity',0);CSS.removeClass(this.summaryIncluding,'hidden_elem');animation(this.summaryIncluding).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).go();for(var a=0;a<this.confirmSpans.length;a++)CSS.addClass(this.confirmSpans[a],'hidden_elem');if(this.grayOut)CSS.removeClass(this.connectButton,'hidden_elem');},animateSimpleButtonDisappearance:function(){animation(this.connectButton).from('opacity',1).to('opacity',0).from('width',this.originalButtonWidth).to('width','0px').ondone(function(){CSS.addClass(this.connectButton,'hidden_elem');CSS.setStyle(this.summaryIncluding,'opacity',0);CSS.removeClass(this.summaryIncluding,'hidden_elem');animation(this.summaryIncluding).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).duration(50).go();for(var a=0;a<this.confirmSpans.length;a++)CSS.addClass(this.confirmSpans[a],'hidden_elem');if(this.grayOut)CSS.removeClass(this.connectButton,'hidden_elem');},computeButtonDimensions:function(){var c=CSS.hasClass(this.connectButton,'hidden_elem');if(c){CSS.addClass(this.connectButton,'connect_widget_offscreen');CSS.removeClass(this.connectButton,'hidden_elem');}var a=Vector2.getElementDimensions(this.connectButton);var d=a.x;var b=a.y;var f=parseInt(CSS.getStyle(this.connectButton,'paddingLeft'),10);var g=parseInt(CSS.getStyle(this.connectButton,'paddingRight'),10);var h=parseInt(CSS.getStyle(this.connectButton,'paddingTop'),10);var e=parseInt(CSS.getStyle(this.connectButton,'paddingBottom'),10);if(c){CSS.addClass(this.connectButton,'hidden_elem');CSS.removeClass(this.connectButton,'connect_widget_offscreen');}return {width:d-f-g-2,height:b};},computeButtonDimensionsWithPadding:function(){var c=CSS.hasClass(this.connectButton,'hidden_elem');if(c){CSS.addClass(this.connectButton,'connect_widget_offscreen');CSS.removeClass(this.connectButton,'hidden_elem');}var a=Vector2.getElementDimensions(this.connectButton);var d=a.x;var b=a.y;if(ua.ie())d+=3;if(c){CSS.addClass(this.connectButton,'hidden_elem');CSS.removeClass(this.connectButton,'connect_widget_offscreen');}return {width:d,height:b};},animateButtonCountButtonReappearance:function(){if(this.showConfirm){for(var a=0;a<this.confirmSpans.length;a++)CSS.removeClass(this.confirmSpans[a],'hidden_elem');}else if(!this.grayOut){CSS.removeClass(this.connectButton,'hidden_elem');animation(this.connectButton).from('width','0px').to('width',this.originalButtonWidth).from('opacity',0).to('opacity',1).duration(100).go();}CSS.setStyle(this.summaryIncluding,'opacity',1);animation(this.summaryIncluding).from('opacity',1).to('opacity',0).duration(100).ondone(function(){CSS.addClass(this.summaryIncluding,'hidden_elem');CSS.setStyle(this.numberExcluding,'opacity',0);CSS.removeClass(this.numberExcluding,'hidden_elem');animation(this.numberExcluding).from('opacity',0).to('opacity',1).duration(100).go();}.bind(this)).go();},animateSimpleButtonReappearance:function(){if(this.showConfirm){for(var a=0;a<this.confirmSpans.length;a++)CSS.removeClass(this.confirmSpans[a],'hidden_elem');}else{CSS.removeClass(this.connectButton,'hidden_elem');animation(this.connectButton).from('width','0px').to('width',this.originalButtonWidth).from('opacity',0).to('opacity',1).duration(100).go();}CSS.setStyle(this.summaryIncluding,'opacity',1);animation(this.summaryIncluding).from('opacity',1).to('opacity',0).duration(100).ondone(function(){CSS.addClass(this.summaryIncluding,'hidden_elem');}.bind(this)).go();},injectCommentWidgetMarkup:function(a){this.commentDocument=a;this.commentDocument.body.innerHTML=this.commentWidgetMarkup;this.transferCSSStyles();if(this.newProfilePic){var c=DOM.find(this.commentDocument,'img.connect_comment_widget_user_pic');c.src=this.newProfilePic;delete this.newProfilePic;}if(ua.ie()){var f=DOM.scry(this.commentDocument,'.connect_comment_share_preview_pic');if(f.length>0){f=f[0];var e=50;var d=Vector2.getElementDimensions(f);var g=e/d.x;if(g<1){CSS.setStyle(f,'width',e);CSS.setStyle(f,'height',d.y*g);}}}this.setupCommentHooks(this.commentDocument);this.commentWidgetIsExpanded=!this.inlineUnlikeLink;var b=this.getCommentActivatingComponent();b.onmouseout=this.commentDocument.body.onmouseout=this.onCommentMouseOut.bind(this);b.onmouseover=this.commentDocument.body.onmouseover=this.onCommentMouseOver.bind(this);this.inGracePeriod=false;},onCommentMouseOut:function(a){if(this.mouseclickToDismiss){this.mouseOutside=true;return true;}else return this.hideCommentWidget();},onCommentMouseOver:function(a){if(this.mouseclickToDismiss){this.mouseOutside=false;return true;}else return this.showCommentWidget();},setupCommentHooks:function(a){this.placeholderInputRegion=DOM.find(a,'div.connect_comment_widget_placeholder_input_region');this.placeholderInput=DOM.find(this.placeholderInputRegion,'input.connect_comment_widget_placeholder_input');this.fullInputRegion=DOM.find(a,'div.connect_comment_widget_full_input_region');this.fullInputTextarea=DOM.find(this.fullInputRegion,'textarea.connect_comment_widget_full_input_textarea');this.ownProductCheckbox=DOM.scry(a,'.connect_comment_widget_own_product_checkbox');if(this.ownProductCheckbox.length>0)this.ownProductCheckbox=this.ownProductCheckbox[0];this.widgetButtonRegion=DOM.find(a,'div.connect_comment_widget_button_region');this.postToFacebookButton=DOM.scry(this.widgetButtonRegion,'.connect_comment_widget_post_button input');if(this.postToFacebookButton.length>0){this.postToFacebookButton=this.postToFacebookButton[0];this.postToFacebookButton.onclick=this.updateUserComment.bind(this);}this.closeButton=DOM.scry(this.widgetButtonRegion,'.connect_comment_widget_close_button input');if(this.closeButton.length>0){this.closeButton=this.closeButton[0];this.closeButton.onclick=this.closeCommentWidget.bind(this);this.sendOnEnter=true;}this.mouseclickToDismiss=CSS.hasClass(this.widgetButtonRegion,'mouseclicktodismiss');this.inlineUnlikeLink=DOM.scry(a,'a.connect_comment_widget_unlike_link');if(this.inlineUnlikeLink.length>0){this.inlineUnlikeLink=this.inlineUnlikeLink[0];this.inlineUnlikeLink.onclick=this.connectToNodeOnClick.bind(this);}this.defaultInputText=this.placeholderInput.value;this.placeholderInput.onfocus=this.transitionToFullInputMode.bind(this);this.fullInputTextarea.onfocus=this.removePlaceholderText.bind(this);this.fullInputTextarea.onblur=(function(b){this.restorePlaceholderText();if(this.mouseclickToDismiss&&this.mouseOutside)return this.hideCommentWidget();}).bind(this);if(this.inlineUnlikeLink)this.inlineUnlikeLink.onclick=this.connectToNodeOnClick.bind(this);if(this.closeButton)this.closeButton.onclick=this.closeCommentWidget.bind(this);this.sendOnEnter=(CSS.hasClass(this.widgetButtonRegion,'sendonenter')||this.sendOnEnter);if(this.sendOnEnter){this.fullInputTextarea.onkeydown=(function(b){b=b||window.event;if(!b)return true;if(this.sendOnEnter&&b.keyCode==13&&!(b.ctrlKey||b.shiftKey||b.altKey||b.metaKey)){this.updateUserComment();return false;}if(this.didResetOnKeydown)return true;this.removePlaceholderText();this.didResetOnKeydown=true;return true;}).bind(this);this.transitionToFullInputMode();}},getCommentActivatingComponent:function(){if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT||this.layout===ExternalNodeConnectWidget.BUTTON_COUNT_LAYOUT){return this.widget;}else if(this.layout===ExternalNodeConnectWidget.SIMPLE_LAYOUT){return this.widget;}else if(this.grayOut){return DOM.find(this.widget,'table.connect_widget_interactive_area');}else return this.confirmationCell;},showCommentWidget:function(event){if(this.otherCommentWidgetOpen)return false;this.inGracePeriod=true;this.killCloseThread();if(this.commentWidgetOpen&&!this.commentWidgetVisible){this.commentWidgetVisible=true;CSS.show(this.commentDocument.body);UnverifiedXD.send({type:'showEdgeCommentDialog'});}return false;},hideCommentWidget:function(event){if(this.otherCommentWidgetOpen)return false;this.inGracePeriod=false;if(this.commentWidgetOpen&&this.commentWidgetVisible){var a=function(){if(!this.inGracePeriod&&this.shouldHideExpandedWidget()){this.fullInputTextarea.blur();this.commentWidgetVisible=false;if(!this.socialBar)CSS.hide(this.commentDocument.body);UnverifiedXD.send({type:'hideEdgeCommentDialog'});}this.inGracePeriod=false;this.killCloseThread();}.bind(this);this.closeThreadID=setTimeout(a,100);}return false;},shouldHideExpandedWidget:function(){return !this.commentWidgetIsExpanded||this.fullInputTextarea.value===''||this.fullInputTextarea.value===this.defaultInputText;},killCloseThread:function(){if(this.closeThreadID){clearTimeout(this.closeThreadID);delete this.closeThreadID;}},transferCSSStyles:function(){var e=DOM.scry(window.document,'link');var f=DOM.scry(window.document,'style');var d=DOM.find(window.document,'html');var h=DOM.find(this.commentDocument,'html');var g=DOM.find(this.commentDocument,'head');for(var b=0;b<e.length;b++)if(e[b].rel=='stylesheet'){var c=this.commentDocument.createElement('link');c.rel=e[b].rel;c.href=e[b].href;c.type=e[b].type;g.appendChild(c);}for(b=0;b<f.length;b++){var i=this.commentDocument.createElement('style');var a=f[b].innerText||f[b].textContent||f[b].innerHTML;i.setAttribute("type","text/css");g.appendChild(i);if(i.styleSheet){i.styleSheet.cssText=a;}else{var j=this.commentDocument.createTextNode(a);i.appendChild(j);}}h.id=d.id;h.className=d.className;this.commentDocument.body.className=window.document.body.className;},transitionToFullInputMode:function(event){this.commentWidgetIsExpanded=true;CSS.hide(this.placeholderInputRegion);CSS.show(this.fullInputRegion);CSS.show(this.widgetButtonRegion);if(this.closeButton||this.sendOnEnter){this.restorePlaceholderText();var b=this.fullInputTextarea;if(document.selection){var a=b.createTextRange();a.collapse(true);a.moveEnd('character',0);a.moveStart('character',0);a.select();}else if(b.setSelectionRange){b.focus();b.setSelectionRange(0,0);}}return false;},removePlaceholderText:function(event){if(CSS.hasClass(this.fullInputTextarea,'connect_comment_widget_disabled')){CSS.removeClass(this.fullInputTextarea,'connect_comment_widget_disabled');this.fullInputTextarea.value='';}return false;},restorePlaceholderText:function(event){if(this.fullInputTextarea.value.trim()==''){this.fullInputTextarea.value=this.defaultInputText;CSS.addClass(this.fullInputTextarea,'connect_comment_widget_disabled');}return false;},updateUserComment:function(event){var b=this.fullInputTextarea.value.trim();var a=this.ownProductCheckbox.checked;if(b===''||b==this.defaultInputText){if(a===false)return false;b='';}this.postUserComment(b,a);return false;},getAjaxEndpoint:function(){return '/ajax/connect/external_node_connect.php';},getCommentAjaxEndpoint:function(){return '/ajax/connect/external_edge_comment.php';},getConfirmURL:function(){var a={href:this.externalUrl,page_id:this.pageId,node_type:this.nodeType,edge_type:this.edgeType,widget_id:this.widgetID};if(this.ref)a.ref=this.ref;return URI('/plugins/like_confirm.php').addQueryData(a).toString();},updateLoggedInUser:function(b,a){ExternalNodeConnectWidget.updateLoggedInUser(b,a);},syncSendWidgetWidth:function(h,b){var a=this.computeButtonDimensionsWithPadding().width;var c=b.button_width-a;if(this.layout===ExternalNodeConnectWidget.BOX_COUNT_LAYOUT&&c>0&&c<=5){CSS.setStyle(this.connectButton,'width',(b.button_width-parseInt(CSS.getStyle(this.connectButton,'paddingLeft'))-parseInt(CSS.getStyle(this.connectButton,'paddingRight'))-parseInt(CSS.getStyle(this.connectButton,'borderLeftWidth'))-parseInt(CSS.getStyle(this.connectButton,'borderRightWidth')))+'px');this.sizeNumberCloud();}if(this.layout===ExternalNodeConnectWidget.STANDARD_LAYOUT){var d=Vector2.getElementDimensions(this.widget).y;CSS.setStyle(this.widget,'height',(d+5)+'px');var e=ua.ie();var f=intl_locale_is_rtl();var g=f?'right':'left';if(e&&e<9){CSS.setStyle(this.connectButton,'position','absolute');CSS.setStyle(this.connectButton,g,-(b.button_width+10)+'px');}else{CSS.setStyle(this.connectButton,'position','fixed');CSS.setStyle(this.connectButton,g,'0px');}if(e&&this.connectButtonSlider){CSS.setStyle(this.connectButtonSlider,g,b.button_width+'px');if(e<=7)this.fixIEButtonDoubleLineBug();}CSS.setStyle(this.confirmationCell,'position','absolute');CSS.setStyle(this.confirmationCell,g,(b.button_width+a+5)+'px');CSS.setStyle(this.confirmationCell,'top','5px');if(this.sampleConnections){CSS.setStyle(this.sampleConnections,'position','fixed');CSS.setStyle(this.sampleConnections,g,'0');}this.invertedButtons=true;this.repositionFacepileVertically();}},repositionFacepileVertically:function(){if(this.invertedButtons&&this.sampleConnections){var a=Vector2.getElementDimensions(this.summaryText).y;CSS.setStyle(this.sampleConnections,'margin-top',(5+a+5)+'px');}}});
var ExternalPageLikeWidget=function(a){a.edgeType='like';this.parent.construct(this,a);this.unactionLink=DOM.scry(this.widget,'span.unlike_link')[0];if(this.unactionLink)Event.listen(this.unactionLink,'click',this.connectToNodeOnClick.bind(this));this.hasShowedInsights=false;this.showInsights();};Class.extend(ExternalPageLikeWidget,'ExternalNodeConnectWidget');ExternalPageLikeWidget.LIKE_EDGE_TYPE=0;ExternalPageLikeWidget.RECOMMEND_EDGE_TYPE=1;copy_properties(ExternalPageLikeWidget.prototype,{getSyncEndpointName:function(){var a=this.connectText?this.connectText:'like';if(a==ExternalPageLikeWidget.RECOMMEND_EDGE_TYPE)a='like';return 'platform/'+a+'/sync';},getConnectionEndpointName:function(){return 'platform/like/connection';},getPluginName:function(){return 'like';},presentInsightsPage:function(){window.open('/insights/?sk=po_'+this.pageId,'_blank');},showInsights:function(){if(this.hasShowedInsights||!this.pageId)return;var b=DOM.scry(this.widget,'a.connect_widget_insights_link');if(b)for(var a=0;a<b.length;a++){CSS.show(b[a].parentNode);Event.listen(b[a],'click',this.presentInsightsPage.bind(this));}this.hasShowedInsights=true;},repositionFacepileVertically:function(){this.showInsights();this.parent.repositionFacepileVertically();}});
function SendButton(b){var a=$(b.divID);copy_properties(this,{button:DOM.find(a,'a.btnLink'),channel:b.channel,div:a,divID:b.divID,loggedIn:!!b.userID,nodeImageURL:b.nodeImageURL,nodeTitle:b.nodeTitle,nodeURL:b.nodeURL,nodeSummary:b.nodeSummary,error:b.error,initFormOpen:b.initFormOpen,extended_social_context:b.extended_social_context,likeButtonLayout:b.likeButtonLayout});this.init();}copy_properties(SendButton.prototype,{init:function(){this.formIsOpen=false;this.formIsShown=false;this.pendingFormShow=false;Arbiter.subscribe('platform/socialplugins/send/sent',function(b,a){if(a.controllerID===this.divID)this.closeForm();}.bind(this),Arbiter.SUBSCRIBE_NEW);Arbiter.subscribe('platform/socialplugins/send/cancel',function(b,a){if(a.controllerID===this.divID)this.hideForm();}.bind(this),Arbiter.SUBSCRIBE_NEW);this.buttonWidth=Vector2.getElementDimensions(this.button).x;this.widthSyncArbiter=Arbiter.subscribe('platform/socialplugins/like/resize',this.syncLikeWidgetWidth.bind(this));Arbiter.inform('platform/socialplugins/send/resize',{button_width:this.buttonWidth},Arbiter.BEHAVIOR_STATE);Arbiter.subscribe('platform/socialplugins/dialog',function(b,a){if(a.controllerID!==this.divID&&a.event=='open')this.closeForm();}.bind(this));UnverifiedXD.init({channelUrl:this.channel,autoResize:true,resizeWidth:true});Event.listen(this.button,'click',this.toggleFormVisibility.bind(this));if(this.initFormOpen)onafterloadRegister(this.toggleFormVisibility.bind(this));},syncLikeWidgetWidth:function(d,a){var b=a.button_width-this.buttonWidth;if(a.layout==='box_count'&&b>0&&b<=5)CSS.setStyle(this.div,'width',(a.button_width-parseInt(CSS.getStyle(this.button,'paddingLeft'))-parseInt(CSS.getStyle(this.button,'paddingRight'))-parseInt(CSS.getStyle(this.button,'borderLeftWidth'))-parseInt(CSS.getStyle(this.button,'borderRightWidth')))+'px');if(a.layout==='standard'){var c=intl_locale_is_rtl()?'right':'left';CSS.setStyle(this.div,'position','absolute');CSS.setStyle(this.div,c,(a.button_width+5)+'px');this.invertedButtons=true;}this.likeWidgetWidth=a.widget_width;this.likeButtonWidth=a.button_width;},toggleFormVisibility:function(a){if(!this.loggedIn){a.kill();PlatformOptInPopup.open('send');return;}if(!this.formIsOpen){this.openForm();}else if(this.formIsShown){this.hideForm();}else this.showForm();},hideForm:function(){if(this.formIsShown){this.formIsShown=false;UnverifiedXD.send({type:'hideEdgeCommentDialog'});CSS.removeClass(this.div,'fbSendButtonSelected');}},showForm:function(){if(!this.formIsShown){CSS.addClass(this.div,'fbSendButtonSelected');this.formIsShown=true;UnverifiedXD.send({type:'showEdgeCommentDialog'});}},closeForm:function(){Arbiter.inform('platform/socialplugins/dialog',{controllerID:this.divID,event:'close'});if(this.formIsOpen){this.formIsOpen=this.formIsShown=false;UnverifiedXD.send({type:'dismissEdgeCommentDialog'});CSS.removeClass(this.div,'fbSendButtonSelected');}return this;},openForm:function(){Arbiter.inform('platform/socialplugins/dialog',{controllerID:this.divID,event:'open'});if(!this.formIsOpen){CSS.addClass(this.div,'fbSendButtonSelected');this.formIsOpen=this.formIsShown=true;var a={type:'presentEdgeCommentDialog',nodeImageURL:this.nodeImageURL,nodeTitle:this.nodeTitle,nodeURL:this.nodeURL,nodeSummary:this.nodeSummary,controllerID:this.divID,error:this.error,widget_type:'send',extended_social_context:this.extended_social_context};if(this.likeButtonLayout=='button_count'){a.preComputedWidthOffset=this.likeWidgetWidth?this.likeWidgetWidth+10:91;}else if(this.likeButtonLayout=='box_count'){a.preComputedHeightOffset=65;a.preComputedWidthOffset=this.buttonWidth?this.buttonWidth+7:60;a.siderender=true;}else if(this.likeButtonLayout=='simple'){a.preComputedWidthOffset=100;}else if(this.likeButtonLayout=='standard'&&this.invertedButtons)a.preComputedWidthOffset=this.likeButtonWidth?this.likeButtonWidth+5:69;UnverifiedXD.send(a);}return this;}});